(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{AXHE:function(e,t,a){"use strict";a.r(t),a.d(t,"VisorControlModule",function(){return ka});var s=a("PCNd"),i=a("ofXK"),o=a("3Pt+"),r=a("0FS3"),c=a("CV0D"),n=a("c2SN"),l=a("1jcm"),d=a("fXoL");let m=(()=>{class e extends n.a{constructor(){super(...arguments),this.defaultOptions={templateOptions:{hideFieldUnderline:!0,floatLabel:"always",hideLabel:!0}}}onContainerClick(e){this.slideToggle.focus(),super.onContainerClick(e)}}return e.\u0275fac=function(t){return b(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["formly-field-mat-toggle"]],viewQuery:function(e,t){if(1&e&&d.Uc(l.a,!0),2&e){let e;d.zc(e=d.ec())&&(t.slideToggle=e.first)}},features:[d.zb],decls:2,vars:7,consts:[[3,"id","formControl","formlyAttributes","color","tabIndex","required"]],template:function(e,t){1&e&&(d.Vb(0,"mat-slide-toggle",0),d.Qc(1),d.Ub()),2&e&&(d.qc("id",t.id)("formControl",t.formControl)("formlyAttributes",t.field)("color",t.to.color)("tabIndex",t.to.tabindex)("required",t.to.required),d.Cb(1),d.Sc(" ",t.to.label," "))},directives:[l.a,l.c,o.q,o.h,r.c,o.w],encapsulation:2}),e})();const b=d.Xb(m);let p=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[i.c,o.v,l.b,n.b,r.f.forChild({types:[{name:"toggle",component:m,wrappers:["form-field"]}]})]]}),e})();var h=a("qFsG"),u=a("iadO");const g=["datepickerToggle"];function f(e,t){if(1&e&&d.Qb(0,"mat-datepicker-toggle",4),2&e){const e=d.hc(),t=d.Ac(4);d.qc("disabled",e.to.disabled)("for",t)}}let C=(()=>{class e extends n.a{constructor(){super(...arguments),this.defaultOptions={templateOptions:{datepickerOptions:{startView:"month",datepickerTogglePosition:"suffix",dateInput:()=>{},dateChange:()=>{},monthSelected:()=>{},yearSelected:()=>{}}}}}ngAfterViewInit(){super.ngAfterViewInit(),this.datepickerInput._formField=this.formField,setTimeout(()=>{switch(this.to.datepickerOptions.datepickerTogglePosition){case"suffix":this.to._matSuffix=this.datepickerToggle;break;case"prefix":this.to._matPrefix=this.datepickerToggle}this.options._markForCheck(this.field)})}}return e.\u0275fac=function(t){return x(t||e)},e.\u0275cmp=d.Jb({type:e,selectors:[["formly-field-mat-datepicker"]],viewQuery:function(e,t){if(1&e&&(d.Jc(h.b,!0),d.Jc(u.c,!0),d.Uc(g,!0)),2&e){let e;d.zc(e=d.ec())&&(t.formFieldControl=e.first),d.zc(e=d.ec())&&(t.datepickerInput=e.first),d.zc(e=d.ec())&&(t.datepickerToggle=e.first)}},features:[d.zb],decls:5,vars:20,consts:[["matInput","",3,"id","errorStateMatcher","formControl","matDatepicker","matDatepickerFilter","max","min","formlyAttributes","placeholder","tabindex","readonly","required","dateInput","dateChange"],["datepickerToggle",""],[3,"color","dateClass","disabled","opened","panelClass","startAt","startView","touchUi","monthSelected","yearSelected"],["picker",""],[3,"disabled","for"]],template:function(e,t){if(1&e){const e=d.Wb();d.Vb(0,"input",0),d.dc("dateInput",function(e){return t.to.datepickerOptions.dateInput(t.field,e)})("dateChange",function(e){return t.to.datepickerOptions.dateChange(t.field,e)}),d.Ub(),d.Oc(1,f,1,2,"ng-template",null,1,d.Pc),d.Vb(3,"mat-datepicker",2,3),d.dc("monthSelected",function(a){d.Dc(e);const s=d.Ac(4);return t.to.datepickerOptions.monthSelected(t.field,a,s)})("yearSelected",function(a){d.Dc(e);const s=d.Ac(4);return t.to.datepickerOptions.yearSelected(t.field,a,s)}),d.Ub()}if(2&e){const e=d.Ac(4);d.qc("id",t.id)("errorStateMatcher",t.errorStateMatcher)("formControl",t.formControl)("matDatepicker",e)("matDatepickerFilter",t.to.datepickerOptions.filter)("max",t.to.datepickerOptions.max)("min",t.to.datepickerOptions.min)("formlyAttributes",t.field)("placeholder",t.to.placeholder)("tabindex",t.to.tabindex)("readonly",t.to.readonly)("required",t.to.required),d.Cb(3),d.qc("color",t.to.color)("dateClass",t.to.datepickerOptions.dateClass)("disabled",t.to.datepickerOptions.disabled)("opened",t.to.datepickerOptions.opened)("panelClass",t.to.datepickerOptions.panelClass)("startAt",t.to.datepickerOptions.startAt)("startView",t.to.datepickerOptions.startView)("touchUi",t.to.datepickerOptions.touchUi)}},directives:[h.b,o.d,u.c,o.q,o.h,r.c,o.w,u.b,u.f],encapsulation:2}),e})();const x=d.Xb(C);let _=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[i.c,o.v,h.c,u.e,n.b,r.f.forChild({types:[{name:"datepicker",component:C,wrappers:["form-field"]}]})]]}),e})();var v=a("tyNb"),y=a("ey9i"),S=a("HDdC"),O=a("lJxs"),U=a("JIr8"),V=a("vkgz"),k=a("XNiG"),w=a("7o/Q"),q=a("quSY"),A=a("jtHE");const T={url:"",deserializer:e=>JSON.parse(e.data),serializer:e=>JSON.stringify(e)};class Q extends k.a{constructor(e,t){if(super(),e instanceof S.a)this.destination=t,this.source=e;else{const t=this._config=Object.assign({},T);if(this._output=new k.b,"string"==typeof e)t.url=e;else for(let a in e)e.hasOwnProperty(a)&&(t[a]=e[a]);if(!t.WebSocketCtor&&WebSocket)t.WebSocketCtor=WebSocket;else if(!t.WebSocketCtor)throw new Error("no WebSocket constructor can be found");this.destination=new A.a}}lift(e){const t=new Q(this._config,this.destination);return t.operator=e,t.source=this,t}_resetState(){this._socket=null,this.source||(this.destination=new A.a),this._output=new k.b}multiplex(e,t,a){const s=this;return new S.a(i=>{try{s.next(e())}catch(r){i.error(r)}const o=s.subscribe(e=>{try{a(e)&&i.next(e)}catch(r){i.error(r)}},e=>i.error(e),()=>i.complete());return()=>{try{s.next(t())}catch(r){i.error(r)}o.unsubscribe()}})}_connectSocket(){const{WebSocketCtor:e,protocol:t,url:a,binaryType:s}=this._config,i=this._output;let o=null;try{o=t?new e(a,t):new e(a),this._socket=o,s&&(this._socket.binaryType=s)}catch(c){return void i.error(c)}const r=new q.a(()=>{this._socket=null,o&&1===o.readyState&&o.close()});o.onopen=e=>{const{_socket:t}=this;if(!t)return o.close(),void this._resetState();const{openObserver:a}=this._config;a&&a.next(e);const s=this.destination;this.destination=w.a.create(t=>{if(1===o.readyState)try{const{serializer:e}=this._config;o.send(e(t))}catch(e){this.destination.error(e)}},e=>{const{closingObserver:t}=this._config;t&&t.next(void 0),e&&e.code?o.close(e.code,e.reason):i.error(new TypeError("WebSocketSubject.error must be called with an object with an error code, and an optional reason: { code: number, reason: string }")),this._resetState()},()=>{const{closingObserver:e}=this._config;e&&e.next(void 0),o.close(),this._resetState()}),s&&s instanceof A.a&&r.add(s.subscribe(this.destination))},o.onerror=e=>{this._resetState(),i.error(e)},o.onclose=e=>{this._resetState();const{closeObserver:t}=this._config;t&&t.next(e),e.wasClean?i.complete():i.error(e)},o.onmessage=e=>{try{const{deserializer:t}=this._config;i.next(t(e))}catch(t){i.error(t)}}}_subscribe(e){const{source:t}=this;return t?t.subscribe(e):(this._socket||this._connectSocket(),this._output.subscribe(e),e.add(()=>{const{_socket:e}=this;0===this._output.observers.length&&(e&&1===e.readyState&&e.close(),this._resetState())}),e)}unsubscribe(){const{_socket:e}=this;e&&1===e.readyState&&e.close(),this._resetState(),super.unsubscribe()}}var P=a("EY2u"),L=a("PqYM"),E=a("eIep"),I=a("SpAZ"),F=a("zx2A");class N{constructor(e,t){this.notifier=e,this.source=t}call(e,t){return t.subscribe(new H(e,this.notifier,this.source))}}class H extends F.b{constructor(e,t,a){super(e),this.notifier=t,this.source=a}error(e){if(!this.isStopped){let a=this.errors,s=this.retries,i=this.retriesSubscription;if(s)this.errors=void 0,this.retriesSubscription=void 0;else{a=new k.b;try{const{notifier:e}=this;s=e(a)}catch(t){return super.error(t)}i=Object(F.c)(s,new F.a(this))}this._unsubscribeAndRecycle(),this.errors=a,this.retries=s,this.retriesSubscription=i,a.next(e)}}_unsubscribe(){const{errors:e,retriesSubscription:t}=this;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0}notifyNext(){const{_unsubscribe:e}=this;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)}}var M=a("l7GE"),D=a("ZUHj");class j{constructor(e){this.delayDurationSelector=e}call(e,t){return t.subscribe(new R(e,this.delayDurationSelector))}}class R extends M.a{constructor(e,t){super(e),this.delayDurationSelector=t,this.completed=!1,this.delayNotifierSubscriptions=[],this.index=0}notifyNext(e,t,a,s,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()}notifyError(e,t){this._error(e)}notifyComplete(e){const t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()}_next(e){const t=this.index++;try{const a=this.delayDurationSelector(e,t);a&&this.tryDelay(a,e)}catch(a){this.destination.error(a)}}_complete(){this.completed=!0,this.tryComplete(),this.unsubscribe()}removeSubscription(e){e.unsubscribe();const t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue}tryDelay(e,t){const a=Object(D.a)(this,e,t);a&&!a.closed&&(this.destination.add(a),this.delayNotifierSubscriptions.push(a))}tryComplete(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()}}let z=(()=>{class e{constructor(){this.messagesSubject$=new k.b,this.messages$=this.messagesSubject$.pipe(Object(E.a)(I.a),Object(U.a)(e=>{throw e}))}connect(e={reconnect:!1}){if(!this.socket$||this.socket$.closed){this.socket$=this.getNewWebSocket();const t=this.socket$.pipe(e.reconnect?this.reconnect:e=>e,Object(V.a)({error:e=>console.log("ERROR: ",e)}),Object(U.a)(e=>P.a));this.messagesSubject$.next(t)}}reconnect(e){return e.pipe((t=e=>{return e.pipe(Object(V.a)(e=>console.log("[Data Service] Try to reconnect",e)),(t=e=>Object(L.a)(2e3),e=>e.lift(new j(t))));var t},e=>e.lift(new N(t,e))));var t}close(){this.socket$.complete(),this.socket$=void 0}sendMessage(e){return this.socket$.next(e),e}getNewWebSocket(){return new Q({url:"wss://kvlek4n7a5.execute-api.us-east-1.amazonaws.com/dev",openObserver:{next:()=>{}},closeObserver:{next:()=>{this.socket$=void 0,this.connect({reconnect:!0})}}})}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=d.Lb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var G=a("5eHb"),B=a("FKr1"),$=a("sYmb"),K=a("tgey"),J=a("XiUz"),Y=a("Wp6s"),W=a("znSr"),Z=a("CHOX"),X=a("kmnG"),ee=a("xoCY"),te=a("bTqV"),ae=a("NFeN"),se=a("A5z7");const ie=["chartH"],oe=["chartA"],re=["chart"];function ce(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",29),d.Qc(3,"Concentraci\xf3n Normal"),d.Ub(),d.Ub())}function ne(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",30),d.Qc(3,"Alta Concentraci\xf3n"),d.Ub(),d.Ub())}function le(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",29),d.Qc(3,"Concentraci\xf3n Normal"),d.Ub(),d.Ub())}function de(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",30),d.Qc(3,"Alta Concentraci\xf3n"),d.Ub(),d.Ub())}const me=function(){return["text-white","bg-cyan-800"]},be=function(){return["text-white","bg-blue-gray-500"]};function pe(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",0),d.Vb(1,"div",31),d.Vb(2,"mat-card",2),d.Vb(3,"mat-card-title"),d.Qc(4,"Configuracion de Modulo"),d.Ub(),d.Vb(5,"form",32),d.dc("ngSubmit",function(){return d.Dc(e),d.hc().submit2()}),d.Qb(6,"formly-form",33),d.Vb(7,"button",34),d.Qc(8,"Guardar"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(9,"div",35),d.Vb(10,"mat-card",2),d.Vb(11,"mat-card-title"),d.Qc(12,"Configuracion de Parametros"),d.Ub(),d.Vb(13,"form",32),d.dc("ngSubmit",function(){return d.Dc(e),d.hc().submit1()}),d.Qb(14,"formly-form",33),d.Vb(15,"button",36),d.Qc(16,"Submit"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=d.hc();d.Cb(2),d.qc("ngClass",d.sc(14,me)),d.Cb(3),d.qc("formGroup",e.form2),d.Cb(1),d.qc("model",e.model2)("fields",e.fields2)("options",e.options2)("form",e.form2),d.Cb(1),d.qc("disabled",!e.form2.valid),d.Cb(3),d.qc("ngClass",d.sc(15,be)),d.Cb(3),d.qc("formGroup",e.form1),d.Cb(1),d.qc("model",e.model1)("fields",e.fields1)("options",e.options1)("form",e.form1),d.Cb(1),d.qc("disabled",!e.form1.valid)}}function he(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1),d.ic(2,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Sc(" ",d.jc(2,1,"validations.required")," "))}function ue(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"min"),d.Ub())}function ge(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"max"),d.Ub())}const fe=function(e){return["text-white",e]},Ce=function(){return["text-white"]},xe=function(){return["text-white","bg-gray-800"]},_e={dataSeries1:{mcsc:[],dates:[]},dataSeries2:{mcsst:[],dates:[]}};let ve=(()=>{class e{constructor(e,t,a,s,i,r,c,n){this.ngZone=e,this.toastr=t,this.settings=a,this.service=s,this.dateAdapter=r,this.translate=c,this.token=n,this.unidad="g/L.",this.infoPanel={title_tsc:"Solidos suspendidos en captaci\xf3n",title_tstc:"Solidos suspendidos en tanque de carga",progress:{value_ssc:0,value_sstc:0},color_sc:"bg-indigo-500",color_stc:"bg-blue-500"},this.mcsst=[],this.mcsc=[],this.dates=[],this.dateHour=new S.a(e=>{setInterval(()=>e.next((new Date).toString()),1e3)}),this.form1=new o.j({}),this.model1={},this.options1={},this.fields1=[{type:"input",key:"nameRed",templateOptions:{label:"Nombre de la Red"}},{type:"input",key:"passwordRed",templateOptions:{type:"input",label:"Password de la red",placeholder:"Minimo 3 caracteres",required:!0,minLength:3}}],this.form2=new o.j({}),this.model2={},this.options2={},this.fields2=[{fieldGroupClassName:"row",fieldGroup:[{className:"col-sm-6",type:"input",key:"tsc",templateOptions:{label:"Tiempo de sostenimiento de Captacion. [s]",required:!0}},{className:"col-sm-6",type:"input",key:"tstc",templateOptions:{label:"Tiempo de sostenimiento de Tanque de Carga. [s]",required:!0}}]},{fieldGroupClassName:"row",fieldGroup:[{className:"col-sm-6",type:"input",key:"lcssc",templateOptions:{label:"Limite de Solidos en Captacion. [g/L]",required:!0}},{className:"col-sm-6",type:"input",key:"lcsstc",templateOptions:{label:"Limite de Solidos en Tanque de Carga. [g/L]",required:!0}}]},{fieldGroupClassName:"row",fieldGroup:[{key:"alcssc",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Alarma en Captaci\xf3n",description:"Activacion de alarma de Alta concentracion de solidos suspendidos en captacion",required:!1}},{key:"alcsstc",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Alarma en Tanque de Carga",description:"Activacion de alarma de Alta concentracion de solidos suspendidos en tanque de carga.",required:!1}}]},{type:"checkbox",key:"confirm",templateOptions:{label:"Confirmar"}}],this.amount_ssc=0,this.amount_sstc=0,this.mount_ssc=0,this.mount_sstc=0,this.dHssc=[],this.dHstc=[],this.dAssc=[],this.dAstc=[],this.data$=this.service.messages$.pipe(Object(O.a)(e=>{if("HISTORICO"===e.message&&this.getSeriesHistorico(e.dataHistoric),null!=e.espConf&&"esp1#1001"===e.espConf.ID?(console.warn(" ESP CONFIG"),this.espConf=e.espConf,this.espInfo={ID:"",sortKey:0,Medic_Concen_Soli_Suspen_Captacion:"",Medic_Concen_Soli_Suspen_Tan_Carga:"",Alarm_Concen_Soli_Suspen_Captacion:"",Alarm_Concen_Soli_Suspen_Tan_Carga:""},this.loadConfigESP(this.espConf),this.infoPanel.progress.value_ssc=100*Number(this.espInfo.Medic_Concen_Soli_Suspen_Captacion)/this.model2.lcssc,this.infoPanel.progress.value_sstc=100*Number(this.espInfo.Medic_Concen_Soli_Suspen_Tan_Carga)/this.model2.lcsstc):console.warn("NO CONFIG"),null!=e.dataSave&&null!=e.espConf&&"esp1#1001"===e.espConf.ID?(this.espData=Array.isArray(e.dataSave)?e.dataSave:[],this.loadDataChart(this.espData),this.amount_ssc=0,this.amount_sstc=0,this.infoPanel.progress.value_ssc=0,this.infoPanel.progress.value_sstc=0):console.warn("NO DATA SAVE"),null!=e.dataSend&&"esp1#1001"===e.dataSend.ID){this.espInfo=e.dataSend,console.warn("ESP DATA SEND");let t=new Date(this.espInfo.sortKey);this.dates.push(t),this.mount_ssc=Number(this.espInfo.Medic_Concen_Soli_Suspen_Captacion),this.mount_sstc=Number(this.espInfo.Medic_Concen_Soli_Suspen_Tan_Carga),this.mcsc.shift(),this.mcsst.shift(),this.mcsc.push({x:t,y:this.espInfo.Medic_Concen_Soli_Suspen_Captacion}),this.mcsst.push({x:t,y:this.espInfo.Medic_Concen_Soli_Suspen_Tan_Carga}),this.amount_ssc=Number(this.espInfo.Alarm_Concen_Soli_Suspen_Captacion),this.amount_sstc=Number(this.espInfo.Alarm_Concen_Soli_Suspen_Tan_Carga),this.infoPanel.progress.value_ssc=100*Number(this.espInfo.Medic_Concen_Soli_Suspen_Captacion)/this.model2.lcssc,this.infoPanel.progress.value_sstc=100*Number(this.espInfo.Medic_Concen_Soli_Suspen_Tan_Carga)/this.model2.lcsstc,this.updateChart()}else console.warn("NO ESP DATA SEND")}),Object(U.a)(e=>{throw e}),Object(V.a)({error:e=>console.log("Error:",e),complete:()=>console.log("Connection Closed")})),this.user=this.token.get().email,this.chartOptions={series:[{name:"Tanque de Carga",data:_e.dataSeries1.mcsc.slice()},{name:"Tanque de Captaci\xf3n",data:_e.dataSeries2.mcsst.slice()}],chart:{id:"realtime",type:"area",height:350,foreColor:"#eeeeee",animations:{enabled:!0,easing:"easein",speed:800,animateGradually:{enabled:!0,delay:40},dynamicAnimation:{enabled:!0,speed:350}},toolbar:{show:!0},zoom:{enabled:!0},dropShadow:{enabled:!1,top:0,left:0,blur:3,opacity:.5}},stroke:{curve:"smooth"},title:{text:"Concentraci\xf3n Solidos Suspendidos",align:"center"},subtitle:{text:"Gramos por Litro",align:"left"},labels:_e.dataSeries1.dates,xaxis:{type:"datetime",labels:{show:!0}},yaxis:{opposite:!0},legend:{horizontalAlign:"left"},states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.15}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.35}}},markers:{size:0},tooltip:{enabled:!1,enabledOnSeries:void 0,shared:!0,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"dark",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!0},x:{show:!0,format:"dd MMM AA",formatter:void 0},y:{formatter:void 0,title:{formatter:e=>e}},z:{formatter:void 0,title:"Size: 20 "},marker:{show:!0},items:{},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}}},this.chartOptionsH1={series:[{name:"Solidos Suspendidos en Captaci\xf3n",data:[]},{name:"Solidos Suspendidos en Tanque de Carga",data:[]}],chart:{id:"chart2",type:"line",height:230,foreColor:"#eeeeee",toolbar:{autoSelected:"pan",show:!1}},colors:["#0097DE","#1EDE00"],stroke:{width:3},dataLabels:{enabled:!1},fill:{opacity:1},states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.15}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.35}}},markers:{size:0},xaxis:{type:"datetime"}},this.chartOptionsH2={series:[{name:"Solidos Suspendidos en Captaci\xf3n",data:[]},{name:"Solidos Suspendidos en Tanque de Carga",data:[]}],chart:{id:"chart1",height:130,type:"area",foreColor:"#eeeeee",brush:{target:"chart2",enabled:!0},selection:{enabled:!0,xaxis:{min:(new Date).getTime(),max:(new Date).getTime()}}},colors:["#0097DE","#1EDE00"],fill:{type:"gradient",gradient:{opacityFrom:.91,opacityTo:.1}},xaxis:{type:"datetime",tooltip:{enabled:!1}},yaxis:{tickAmount:2}},this.chartOptionsA={series:[{name:"Alarma en Captaci\xf3n",data:[]},{name:"Alarma en Tanque de Carga",data:[]}],chart:{type:"line",height:350,foreColor:"#eeeeee"},stroke:{curve:"stepline"},dataLabels:{enabled:!1},title:{text:"Alarmas",align:"left"},markers:{size:0,hover:{sizeOffset:4}},xaxis:{type:"datetime"},yaxis:{title:{text:"Alarma"},min:0,max:1}},this.group=i.group({dateTime:[new Date,o.x.required]})}ngOnInit(){this.translateSubscription=this.translate.onLangChange.subscribe(e=>{this.dateAdapter.setLocale(e.lang)}),this.notifySubscription=this.settings.notify.subscribe(e=>{}),this.data$.subscribe(),this.service.connect()}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>console.log("Ng-Zone")),this.service.sendMessage({action:"config",message:"APP",esp:"esp1#1001"})}ngOnDestroy(){console.log("Ondestroy"),this.data$.subscribe(),this.chart.destroy()}dateTimeSeries(e,t,a,s){this.chartOptionsH1.series=[{name:"Solidos Suspendidos en Captaci\xf3n",data:e},{name:"Solidos Suspendidos en Tanque de Carga",data:t}],this.chartOptionsH2.series=[{name:"Solidos Suspendidos en Captaci\xf3n",data:e},{name:"Solidos Suspendidos en Tanque de Carga",data:t}],this.chartOptionsA.series=[{name:"Alarma Solidos Suspendidos en Captaci\xf3n",data:a},{name:"Alarma Solidos Suspendidos en Tanque de Carga",data:s}]}getSeriesHistorico(e){e.forEach(e=>{this.dHssc.push([e.sortKey-18e6,e.Medic_Concen_Soli_Suspen_Captacion]),this.dHstc.push([e.sortKey-18e6,e.Medic_Concen_Soli_Suspen_Tan_Carga]),this.dAssc.push([e.sortKey-18e6,e.Alarm_Concen_Soli_Suspen_Captacion]),this.dAstc.push([e.sortKey-18e6,e.Alarm_Concen_Soli_Suspen_Tan_Carga])}),this.dateTimeSeries(this.dHssc,this.dHstc,this.dAssc,this.dAstc)}connection(){console.log("Connection Config APP"),this.data$.subscribe(),this.service.connect();const e=this.service.sendMessage({action:"config",message:"APP",esp:"esp1#1001",date:(new Date).getTime()});console.log("resp connection: ",e)}disconnect(){console.log("Disconnected: "),this.service.close()}loadConfigESP(e){this.model2={tsc:e.Tiempo_Sost_Captacion,tstc:e.Tiempo_Sost_Tank,lcssc:e.Limite_Conc_Soli_Capta,lcsstc:e.Limite_Conc_Soli_Tank,alcssc:1===Number(e.Acti_Alarm_Conc_Soli_Capta),alcsstc:1===Number(e.Acti_Alarm_Conc_Soli_Tank)}}loadDataChart(e){e.forEach(e=>{let t=new Date(e.sortKey);this.dates.push(t),this.mcsc.push({x:t,y:e.Medic_Concen_Soli_Suspen_Captacion}),this.mcsst.push({x:t,y:e.Medic_Concen_Soli_Suspen_Tan_Carga})}),this.updateChart()}updateChart(){this.chart.updateSeries([{data:this.mcsc.slice()},{data:this.mcsst.slice()}])}submit1(){this.form1.valid&&this.showToast(this.model1)}chartReset(){this.chart.resetSeries()}submit2(){if(this.form2.valid){let e={action:"control",message:"ESPM1",espCLIENT:"esp1",espCode:"1001",control:"config",Tiempo_Sost_Captacion:this.model2.tsc,Tiempo_Sost_Tank:this.model2.tstc,Limite_Conc_Soli_Capta:this.model2.lcssc,Limite_Conc_Soli_Tank:this.model2.lcsstc,Acti_Alarm_Conc_Soli_Capta:this.model2.alcssc?1:0,Acti_Alarm_Conc_Soli_Tank:this.model2.alcsstc?1:0};this.showToast(e),this.showToast("Reconfigurado ESP Modulo 1"),this.service.sendMessage(e)}}getHistorico(){this.dHssc=[],this.dHstc=[],this.dAssc=[],this.dAstc=[],this.dateTimeSeries(this.dHssc,this.dHstc,this.dAssc,this.dAstc);let e=new Date(this.group.value.dateTime).getTime();console.log("fecha del Historico: ",e);let t={action:"config",message:"HISTORICO",esp:"esp1#1001",date:e};this.showToast(t),this.showToast("Consulta Historico de ESP Modulo 1"),this.service.sendMessage(t)}showToast(e){this.toastr.success(JSON.stringify(e))}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.B),d.Pb(G.b),d.Pb(y.d),d.Pb(z),d.Pb(o.f),d.Pb(B.c),d.Pb($.e),d.Pb(y.e))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-visor-control-espOne"]],viewQuery:function(e,t){if(1&e&&(d.Uc(ie,!0),d.Uc(oe,!0),d.Uc(re,!0)),2&e){let e;d.zc(e=d.ec())&&(t.chartH=e.first),d.zc(e=d.ec())&&(t.chartA=e.first),d.zc(e=d.ec())&&(t.chart=e.first)}},decls:80,vars:75,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],[3,"ngClass"],[1,"f-s-12","f-w-100"],["height","4px","foreground","rgba(255,255,255,1)","background","rgba(0,0,0,.5)",3,"value"],[1,"text-muted"],[4,"ngIf"],["fxFlex","100","fxFlex.gt-sm","70",1,"matero-col"],["id","chart1"],["id","realtime"],[3,"series","chart","xaxis","stroke","dataLabels","yaxis","labels","legend","title","subtitle"],["chart",""],["class","matero-row","fxLayout","row wrap",4,"ngIf"],["fxFlex.gt-sm","60","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],[3,"formGroup"],["matSuffix","",3,"for"],["startView","month","type","datetime",3,"openOnFocus","timeInterval"],["datetimePicker",""],["autocomplete","false","formControlName","dateTime","matInput","","required","",3,"matDatetimepicker","max","min"],["mat-mini-fab","","aria-label","Mini floating action button to increase the button counter by 1",3,"click"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],["id","wrapper"],["id","chart-line"],[3,"series","chart","xaxis","dataLabels","colors","fill","markers","stroke"],["id","chart-line2"],[3,"series","chart","xaxis","colors","fill","yaxis"],["fxFlex.gt-sm","40","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],["id","chart"],[3,"series","chart","xaxis","markers","stroke","dataLabels","title"],["selected","",1,"f-s-10","f-w-20","bg-green-500"],["color","warn","selected","",1,"f-s-10","f-w-20"],["fxFlex.gt-sm","70","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],[3,"formGroup","ngSubmit"],[3,"model","fields","options","form"],["mat-raised-button","",1,"bg-light-green-900",3,"disabled"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","light-green-50"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(e,t){if(1&e&&(d.Qb(0,"page-header"),d.Vb(1,"div",0),d.Vb(2,"div",1),d.Vb(3,"mat-card",2),d.Vb(4,"mat-card-title",3),d.Qc(5),d.Ub(),d.Vb(6,"mat-card-content"),d.Vb(7,"h2"),d.Qc(8),d.ic(9,"number"),d.Ub(),d.Qb(10,"mtx-progress",4),d.Vb(11,"small",5),d.Qc(12,"Limite Max: "),d.Ub(),d.Vb(13,"small",5),d.Qc(14),d.Ub(),d.Vb(15,"p"),d.Oc(16,ce,4,0,"mat-chip-list",6),d.Oc(17,ne,4,0,"mat-chip-list",6),d.Ub(),d.Ub(),d.Ub(),d.Vb(18,"mat-card",2),d.Vb(19,"mat-card-title",3),d.Qc(20),d.Ub(),d.Vb(21,"mat-card-content"),d.Vb(22,"h2"),d.Qc(23),d.ic(24,"number"),d.Ub(),d.Qb(25,"mtx-progress",4),d.Vb(26,"small",5),d.Qc(27,"Limite Max: "),d.Ub(),d.Vb(28,"small",5),d.Qc(29),d.Ub(),d.Vb(30,"p"),d.Oc(31,le,4,0,"mat-chip-list",6),d.Oc(32,de,4,0,"mat-chip-list",6),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(33,"div",7),d.Vb(34,"mat-card"),d.Qb(35,"mat-card-subtitle"),d.Qb(36,"div",8),d.Vb(37,"div",9),d.Qb(38,"apx-chart",10,11),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(40,"small",5),d.Qc(41),d.ic(42,"async"),d.Ub(),d.Qb(43,"br"),d.Qb(44,"br"),d.Qb(45,"br"),d.Oc(46,pe,17,16,"div",12),d.Vb(47,"div",0),d.Vb(48,"div",13),d.Vb(49,"mat-card",2),d.Vb(50,"h1"),d.Qc(51,"Historial de medicion de solidos suspendidos"),d.Ub(),d.Vb(52,"form",14),d.Vb(53,"div",0),d.Vb(54,"mat-form-field"),d.Vb(55,"mat-placeholder"),d.Qc(56,"Fecha y Hora"),d.Ub(),d.Qb(57,"mat-datetimepicker-toggle",15),d.Qb(58,"mat-datetimepicker",16,17),d.Qb(60,"input",18),d.Oc(61,he,3,3,"mat-error",6),d.Oc(62,ue,2,0,"mat-error",6),d.Oc(63,ge,2,0,"mat-error",6),d.Ub(),d.Vb(64,"button",19),d.dc("click",function(){return t.getHistorico()}),d.Vb(65,"mat-icon"),d.Qc(66,"search"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(67,"div",0),d.Vb(68,"div",20),d.Vb(69,"div",21),d.Vb(70,"div",22),d.Qb(71,"apx-chart",23),d.Ub(),d.Vb(72,"div",24),d.Qb(73,"apx-chart",25),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(74,"div",26),d.Vb(75,"mat-card",2),d.Vb(76,"h1"),d.Qc(77,"Alarmas de medicion de solidos suspendidos"),d.Ub(),d.Vb(78,"div",27),d.Qb(79,"apx-chart",28),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e){const e=d.Ac(59);d.Cb(3),d.qc("ngClass",d.tc(69,fe,t.infoPanel.color_sc)),d.Cb(2),d.Rc(t.infoPanel.title_tsc),d.Cb(3),d.Tc("",d.jc(9,63,t.mount_ssc)," ",t.unidad,""),d.Cb(2),d.qc("value",t.infoPanel.progress.value_ssc),d.Cb(4),d.Tc(" ",t.model2.lcssc," ",t.unidad," "),d.Cb(2),d.qc("ngIf",t.amount_ssc<1),d.Cb(1),d.qc("ngIf",t.amount_ssc>=1),d.Cb(1),d.qc("ngClass",d.tc(71,fe,t.infoPanel.color_stc)),d.Cb(2),d.Rc(t.infoPanel.title_tstc),d.Cb(3),d.Tc("",d.jc(24,65,t.mount_sstc)," ",t.unidad,""),d.Cb(2),d.qc("value",t.infoPanel.progress.value_sstc),d.Cb(4),d.Tc(" ",t.model2.lcsstc," ",t.unidad," "),d.Cb(2),d.qc("ngIf",t.amount_sstc<1),d.Cb(1),d.qc("ngIf",t.amount_sstc>=1),d.Cb(6),d.qc("series",t.chartOptions.series)("chart",t.chartOptions.chart)("xaxis",t.chartOptions.xaxis)("stroke",t.chartOptions.stroke)("dataLabels",t.chartOptions.dataLabels)("yaxis",t.chartOptions.yaxis)("labels",t.chartOptions.labels)("legend",t.chartOptions.legend)("title",t.chartOptions.title)("subtitle",t.chartOptions.subtitle),d.Cb(3),d.Sc("Fecha: ",d.jc(42,67,t.dateHour),"."),d.Cb(5),d.qc("ngIf",!("admin@hidroelectrica.com"!=t.user)),d.Cb(3),d.qc("ngClass",d.sc(73,Ce)),d.Cb(3),d.qc("formGroup",t.group),d.Cb(5),d.qc("for",e),d.Cb(1),d.qc("openOnFocus",!0)("timeInterval",5),d.Cb(2),d.qc("matDatetimepicker",e)("max",t.tomorrow)("min",t.today),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.required),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMin),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMax),d.Cb(8),d.qc("series",t.chartOptionsH1.series)("chart",t.chartOptionsH1.chart)("xaxis",t.chartOptionsH1.xaxis)("dataLabels",t.chartOptionsH1.dataLabels)("colors",t.chartOptionsH1.colors)("fill",t.chartOptionsH1.fill)("markers",t.chartOptionsH1.markers)("stroke",t.chartOptionsH1.stroke),d.Cb(2),d.qc("series",t.chartOptionsH2.series)("chart",t.chartOptionsH2.chart)("xaxis",t.chartOptionsH2.xaxis)("colors",t.chartOptionsH2.colors)("fill",t.chartOptionsH2.fill)("yaxis",t.chartOptionsH2.yaxis),d.Cb(2),d.qc("ngClass",d.sc(74,xe)),d.Cb(4),d.qc("series",t.chartOptionsA.series)("chart",t.chartOptionsA.chart)("xaxis",t.chartOptionsA.xaxis)("markers",t.chartOptionsA.markers)("stroke",t.chartOptionsA.stroke)("dataLabels",t.chartOptionsA.dataLabels)("title",t.chartOptionsA.title)}},directives:[K.a,J.c,J.a,Y.a,i.l,W.a,Y.e,Y.b,Z.a,i.n,Y.d,c.a,o.y,o.r,o.k,X.c,X.h,ee.f,X.j,ee.c,o.d,h.b,ee.d,o.q,o.i,o.w,te.b,ae.a,se.b,se.a,r.e,X.b],pipes:[i.g,i.b,$.d],styles:[""]}),e})();var ye=a("l5mm"),Se=a("dNgK"),Oe=a("5RNC"),Ue=a("hGDI"),Ve=a("f0Cb");function ke(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Vb(1,"mat-chip",23),d.Qc(2,"En Proceso"),d.Ub(),d.Ub())}function we(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Vb(1,"mat-chip",24),d.Qc(2,"Parado"),d.Ub(),d.Ub())}function qe(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Vb(1,"mat-chip",25),d.Qc(2,"ERROR"),d.Ub(),d.Ub())}function Ae(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Vb(1,"mat-chip",26),d.Qc(2,"PAUSE"),d.Ub(),d.Ub())}const Te=function(e){return["text-white",e]};function Qe(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",2),d.Vb(1,"mat-card",3),d.Vb(2,"mat-card-title",4),d.Qc(3),d.Ub(),d.Vb(4,"mat-card-content"),d.Vb(5,"h3"),d.Qc(6),d.Ub(),d.Vb(7,"section"),d.Vb(8,"div",0),d.Vb(9,"small",20),d.Qc(10,"Proceso: "),d.Ub(),d.Vb(11,"mat-slider",21),d.dc("ngModelChange",function(e){return t.$implicit.step_clean_grating=e}),d.Ub(),d.Oc(12,ke,3,0,"mat-chip-list",16),d.Oc(13,we,3,0,"mat-chip-list",16),d.Oc(14,qe,3,0,"mat-chip-list",16),d.Oc(15,Ae,3,0,"mat-chip-list",16),d.Ub(),d.Ub(),d.Qb(16,"mat-divider",22),d.Qb(17,"br"),d.Vb(18,"section"),d.Vb(19,"div",7),d.Vb(20,"button",8),d.dc("click",function(){d.Dc(e);const a=t.$implicit;return d.hc().startCleaning(a.id)}),d.Qc(21," Iniciar "),d.Vb(22,"mat-icon"),d.Qc(23,"blur_circular"),d.Ub(),d.Ub(),d.Vb(24,"button",9),d.dc("click",function(){d.Dc(e);const a=t.$implicit;return d.hc().stopCleaning(a.id)}),d.Qc(25," Parar "),d.Vb(26,"mat-icon"),d.Qc(27,"blur_circular"),d.Ub(),d.Ub(),d.Vb(28,"p"),d.Qc(29,"El Proceso de Limpieza se realiza en 8 pasos."),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=t.$implicit,a=d.hc();d.Cb(1),d.qc("ngClass",d.tc(12,Te,a.stats.color_sc)),d.Cb(2),d.Rc(a.stats.title_tsc),d.Cb(3),d.Tc("Rejilla ",e.id," - ",a.proceso[e.step_clean_grating]," "),d.Cb(5),d.qc("ngModel",e.step_clean_grating),d.Cb(1),d.qc("ngIf",e.active&&e.stop&&!("Error"===e.status_clean_grating)),d.Cb(1),d.qc("ngIf",!(e.active||"Error"===e.status_clean_grating)),d.Cb(1),d.qc("ngIf","Error"===e.status_clean_grating),d.Cb(1),d.qc("ngIf","pause"===e.status_clean_grating),d.Cb(1),d.qc("inset",!0),d.Cb(4),d.qc("disabled",(e.active||a.EstadoLimpRejillas||a.active_all)&&"pause"!=e.status_clean_grating),d.Cb(4),d.qc("disabled",!e.stop||!a.EstadoLimpRejillas||a.active_all)}}const Pe=function(){return["text-white","bg-cyan-800"]},Le=function(){return["text-white","bg-blue-gray-500"]};function Ee(e,t){if(1&e){const e=d.Wb();d.Vb(0,"div",0),d.Vb(1,"div",27),d.Vb(2,"mat-card",3),d.Vb(3,"mat-card-title"),d.Qc(4,"Configuracion de Modulo"),d.Ub(),d.Vb(5,"form",28),d.dc("ngSubmit",function(){return d.Dc(e),d.hc().submit2()}),d.Qb(6,"formly-form",29),d.Vb(7,"button",30),d.Qc(8,"Guardar"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(9,"div",31),d.Vb(10,"mat-card",3),d.Vb(11,"mat-card-title"),d.Qc(12,"Configuracion de Parametros"),d.Ub(),d.Vb(13,"form",28),d.dc("ngSubmit",function(){return d.Dc(e),d.hc().submit1()}),d.Qb(14,"formly-form",29),d.Vb(15,"button",32),d.Qc(16,"Submit"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()}if(2&e){const e=d.hc();d.Cb(2),d.qc("ngClass",d.sc(14,Pe)),d.Cb(3),d.qc("formGroup",e.form2),d.Cb(1),d.qc("model",e.model2)("fields",e.fields2)("options",e.options)("form",e.form2),d.Cb(1),d.qc("disabled",!e.form2.valid),d.Cb(3),d.qc("ngClass",d.sc(15,Le)),d.Cb(3),d.qc("formGroup",e.form1),d.Cb(1),d.qc("model",e.model1)("fields",e.fields1)("options",e.options1)("form",e.form1),d.Cb(1),d.qc("disabled",!e.form1.valid)}}function Ie(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1),d.ic(2,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Sc(" ",d.jc(2,1,"validations.required")," "))}function Fe(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"min"),d.Ub())}function Ne(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"max"),d.Ub())}const He=function(){return[5,10,20]};let Me=(()=>{class e{constructor(e,t,a,s,i,r,c,n){this.ngZone=e,this.settings=t,this.service=a,this.snackBar=s,this.toastr=i,this.cdr=r,this.token=c,this.fb=n,this.stats={title_tsc:"Limpiar Rejilla de Captacion",title_tstc:"T. sostenimiento Tanque de Carga",amount_ssc:50.2,amount_sstc:180.2,date:new Date,progress:{value_ssc:50,value_sstc:180},configuration:{time_tsc:2,time_tstc:4,limite_cssc:80,limite_csstc:100,alarm_cssc:2,alarm_csstc:2},color_sc:"bg-indigo-500",color_stc:"bg-blue-500"},this.counter=0,this.time=new S.a(e=>{setInterval(()=>e.next((new Date).toString()),1e3)}),this.form1=new o.j({}),this.model1={},this.options1={},this.fields1=[{type:"input",key:"nameRed",templateOptions:{label:"Nombre de la Red"}},{type:"input",key:"passwordRed",templateOptions:{type:"password",label:"Password de la red",placeholder:"Minimo 3 caracteres",required:!0,minLength:3}}],this.form2=new o.j({}),this.model2={},this.options={},this.fields2=[{fieldGroupClassName:"row",fieldGroup:[{key:"aaa",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Alarma de Atascamiento",description:"Activacion de alarma de atascamiento",required:!1}},{key:"amlr",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Modulo Limpia Rejillas ",description:"Activacion de modulo para limpiar las rejillas.",required:!1}}]},{type:"checkbox",key:"confirm",templateOptions:{label:"Confirmar"}}],this.steps=Object(ye.a)(2e3),this.proceso=["Sin Actividad","Posicionamiento de rastrillo","Ubicaci\xf3n de Rastrillo","Abrir Rastrillo","Bajar Rastrillo","Cerrar Rasrillo","Subir Rastrillo","Activar Banda Transportadora","Verificaci\xf3n de Limpieza"],this.rejillas=[],this.value=0,this.rejilla=0,this.EstadoLimpRejillas=!0,this.activeAll=!0,this.stopAll=!0,this.data$=this.service.messages$.pipe(Object(O.a)(e=>{"HISTORICO"===e.message&&this.getSeriesHistorico(e.dataHistoric.reverse()),null!=e.espConf&&"esp2#1002"===e.espConf.ID?(this.rejillas=e.espConf.rejillas_configuradas,this.loadConfigESP(e.espConf),console.log("regillas: ",this.rejillas),this.getData()):console.warn("NO CONFIG"),null!=e.dataSend&&"esp2#1002"===e.dataSend.ID?(this.activeAll=e.dataSend.active_all,this.stopAll=e.dataSend.stop_all,this.rejillas=e.dataSend.rejillas,this.rejilla=this.rejillas.length,this.EstadoLimpRejillas=e.dataSend.Estado_Limp_Rejillas,this.value=e.dataSend.Monitor_Limp):console.warn("NO ESP DATA SEND")}),Object(U.a)(e=>{throw e}),Object(V.a)({error:e=>console.log("Error:",e),complete:()=>console.log("Connection Closed")})),this.columns=[{header:"Time",field:"sortKey"},{header:"Rejilla 1",field:"rejilla1",type:"tag",tag:{true:{text:"Yes",color:"red-100"},false:{text:"No",color:"green-100"}}},{header:"Rejilla 2",field:"rejilla2",type:"tag",tag:{true:{text:"Yes",color:"red-100"},false:{text:"No",color:"green-100"}}},{header:"Rejilla 3",field:"rejilla3",type:"tag",tag:{true:{text:"Yes",color:"red-100"},false:{text:"No",color:"green-100"}}},{header:"Rejilla 4",field:"rejilla4",type:"tag",tag:{true:{text:"Yes",color:"red-100"},false:{text:"No",color:"green-100"}}},{header:"Rejilla 5",field:"rejilla5",type:"tag",tag:{true:{text:"Yes",color:"red-100"},false:{text:"No",color:"green-100"}}},{header:"Individual",field:"estado",type:"tag",tag:{true:{text:"1",color:"green-500"},false:{text:"0",color:"red-500"}}},{header:"Todas",field:"todas",type:"tag",tag:{true:{text:"1",color:"green-500"},false:{text:"0",color:"red-500"}}}],this.datos=[],this.list=[],this.total=0,this.isLoading=!0,this.query={q:"Rejilla: ",sort:"stars",order:"desc",page:0,per_page:10},this.user=this.token.get().email,this.group=n.group({dateTime:[new Date,o.x.required]})}get params(){const e=Object.assign({},this.query);return e.page+=1,e}ngOnInit(){this.notifySubscription=this.settings.notify.subscribe(e=>{}),this.data$.subscribe(),this.service.connect()}ngAfterViewInit(){console.log("iniciado"),this.service.sendMessage({action:"config",message:"APP",esp:"esp2#1002"})}loadConfigESP(e){console.log("DATA CONFG: ",e),this.model2={aaa:Number(e.Acti_Alarm_Atascamiento),amlr:Number(e.Acti_Mod_Limp_Rejillas)}}getSeriesHistorico(e){var t=0;for(console.log(e);t<e.length-5;)e[t].rejillas&&0!=JSON.stringify(e[t].rejillas).localeCompare(JSON.stringify(e[t+1].rejillas))&&this.datos.push({sortKey:new Date(e[t].sortKey).toLocaleDateString()+" - "+new Date(e[t].sortKey).toLocaleTimeString(),rejilla1:e[t].rejillas[0].step_clean_grating,rejilla2:e[t].rejillas[1].step_clean_grating,rejilla3:e[t].rejillas[2].step_clean_grating,rejilla4:e[t].rejillas[3].step_clean_grating,rejilla5:e[t].rejillas[4].step_clean_grating,estado:e[t].Monitor_Limp,todas:e[t].Estado_Limp_Rejillas}),t++;0!=this.datos.length&&this.datos.length<10&&(console.log(this.datos[this.datos.length-1].sortKey),this.getHistorico_(this.datos[this.datos.length-1].sortKey)),console.log("DA_TA ",this.datos),this.list=this.datos}getHistorico(){let e=new Date(this.group.value.dateTime).getTime();console.log("fecha del Historico: ",e);let t={action:"config",message:"HISTORICO",esp:"esp2#1002",date:e};this.showToast("Consulta Historico de ESP Modulo 1"),this.service.sendMessage(t)}getHistorico_(e){let t=e;console.log("fecha del Historico: ",t);let a={action:"config",message:"HISTORICO",esp:"esp2#1002",date:t};this.showToast(a),this.showToast("Consulta Historico de ESP Modulo 1"),this.service.sendMessage(a)}openSnackBar(e){this.snackBar.open(e,"",{duration:2e3})}startCleaning(e){this.openSnackBar("Inicia Limpieza Rejilla: "+e),this.service.sendMessage({action:"control",message:"ESPM2",espCLIENT:"esp2",espCode:"1002",control:"action",limp_reji_1:1==e?1:0,limp_reji_2:2==e?1:0,limp_reji_3:3==e?1:0,limp_reji_4:4==e?1:0,limp_reji_5:5==e?1:0,limp_todas_reji:0==e?1:0,parar_limpieza:0==e?1:0})}stopCleaning(e){this.openSnackBar("Parar Limpieza: "+e),this.service.sendMessage({action:"control",message:"ESPM2",espCLIENT:"esp2",espCode:"1002",control:"action",limp_reji_1:0,limp_reji_2:0,limp_reji_3:0,limp_reji_4:0,limp_reji_5:0,limp_todas_reji:0,parar_limpieza:0})}submit1(){this.form1.valid&&this.showToast(this.model1)}submit2(){if(this.form2.valid){let e={action:"control",message:"ESPM2",espCLIENT:"esp2",espCode:"1002",control:"config",Acti_Alarm_Atascamiento:this.model2.aaa?1:0,Acti_Mod_Limp_Rejillas:this.model2.amlr?1:0};this.showToast("Reconfigurado ESP Modulo 2"),this.service.sendMessage(e)}}showToast(e){this.toastr.success(JSON.stringify(e))}getData(){this.isLoading=!0,this.list=this.rejillas,this.total=this.rejillas.length,this.isLoading=!1,this.cdr.detectChanges()}getNextPage(e){this.query.page=e.pageIndex,this.query.per_page=e.pageSize,this.getData()}search(){this.query.page=0,this.getData()}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.B),d.Pb(y.d),d.Pb(z),d.Pb(Se.a),d.Pb(G.b),d.Pb(d.h),d.Pb(y.e),d.Pb(o.f))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-visor-control-esp-two"]],decls:53,vars:32,consts:[["fxLayout","row wrap",1,"matero-row"],["class","matero-col","fxFlex.gt-sm","33","fxFlex.gt-xs","50","fxFlex","100",4,"ngFor","ngForOf"],["fxFlex.gt-sm","33","fxFlex.gt-xs","50","fxFlex","100",1,"matero-col"],[3,"ngClass"],[1,"f-s-12","f-w-100"],[1,"text-muted"],["min","0","tickInterval","1","thumbLabel","","aria-label","Rating",3,"max","ngModel","ngModelChange"],[1,"text-center"],["mat-raised-button","","aria-label","",1,"bg-orange-500","text-white",3,"disabled","click"],["mat-raised-button","","color","warn",1,"m-l-8",3,"disabled","click"],["class","matero-row","fxLayout","row wrap",4,"ngIf"],[3,"formGroup"],["matSuffix","",3,"for"],["startView","month","type","datetime",3,"openOnFocus","timeInterval"],["datetimePicker",""],["autocomplete","false","formControlName","dateTime","matInput","","required","",3,"matDatetimepicker","max","min"],[4,"ngIf"],["mat-mini-fab","","aria-label","Mini floating action button to increase the button counter by 1",3,"click"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],[3,"data","columns","length","loading","pageOnFront","pageIndex","pageSize","pageSizeOptions","page"],[1,"m-r-12","text-muted"],["min","0","max","8","tickInterval","1","thumbLabel","","aria-label","Rating",3,"ngModel","ngModelChange"],[3,"inset"],["selected","",1,"m-l-8","f-s-10","f-w-20","bg-green-500"],["selected","",1,"bg-red-300"],["color","warn","selected","",1,"m-l-8","f-s-10","f-w-20"],["selected","",1,"bg-orange-400"],["fxFlex.gt-sm","70","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],[3,"formGroup","ngSubmit"],[3,"model","fields","options","form"],["mat-raised-button","",1,"bg-light-green-900",3,"disabled"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","light-green-50"],["mat-raised-button","","color","primary",3,"disabled"]],template:function(e,t){if(1&e&&(d.Qb(0,"page-header"),d.Vb(1,"div",0),d.Oc(2,Qe,30,14,"div",1),d.Vb(3,"div",2),d.Vb(4,"mat-card",3),d.Vb(5,"mat-card-title",4),d.Qc(6,"Limpiar Todas las Rejillas"),d.Ub(),d.Vb(7,"mat-card-content"),d.Vb(8,"h2"),d.Qc(9),d.Ub(),d.Vb(10,"section"),d.Vb(11,"small",5),d.Qc(12,"Proceso: "),d.Ub(),d.Vb(13,"mat-slider",6),d.dc("ngModelChange",function(e){return t.value=e}),d.Ub(),d.Ub(),d.Vb(14,"section"),d.Vb(15,"div",7),d.Vb(16,"button",8),d.dc("click",function(){return t.startCleaning(0)}),d.Qc(17," Iniciar "),d.Vb(18,"mat-icon"),d.Qc(19,"blur_circular"),d.Ub(),d.Ub(),d.Vb(20,"button",9),d.dc("click",function(){return t.stopCleaning(0)}),d.Qc(21," Parar "),d.Vb(22,"mat-icon"),d.Qc(23,"blur_circular"),d.Ub(),d.Ub(),d.Vb(24,"p"),d.Qc(25,"El Proceso de Limpieza se realiza en 8 pasos."),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(26,"small",5),d.Qc(27),d.ic(28,"async"),d.Ub(),d.Qb(29,"br"),d.Qb(30,"br"),d.Qb(31,"br"),d.Oc(32,Ee,17,16,"div",10),d.Vb(33,"h1"),d.Qc(34,"Historial de Limpieza de Rejillas de Captaci\xf3n"),d.Ub(),d.Vb(35,"form",11),d.Vb(36,"div",0),d.Vb(37,"mat-form-field"),d.Vb(38,"mat-placeholder"),d.Qc(39,"Fecha y Hora"),d.Ub(),d.Qb(40,"mat-datetimepicker-toggle",12),d.Qb(41,"mat-datetimepicker",13,14),d.Qb(43,"input",15),d.Oc(44,Ie,3,3,"mat-error",16),d.Oc(45,Fe,2,0,"mat-error",16),d.Oc(46,Ne,2,0,"mat-error",16),d.Ub(),d.Vb(47,"button",17),d.dc("click",function(){return t.getHistorico()}),d.Vb(48,"mat-icon"),d.Qc(49,"search"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(50,"div",0),d.Vb(51,"div",18),d.Vb(52,"mtx-grid",19),d.dc("page",function(e){return t.getNextPage(e)}),d.Ub(),d.Ub(),d.Ub()),2&e){const e=d.Ac(42);d.Cb(2),d.qc("ngForOf",t.rejillas),d.Cb(2),d.qc("ngClass",d.tc(29,Te,t.stats.color_stc)),d.Cb(5),d.Sc(" #Rejillas: ",t.rejilla," "),d.Cb(4),d.qc("max",t.rejilla)("ngModel",t.value),d.Cb(3),d.qc("disabled",t.activeAll),d.Cb(4),d.qc("disabled",!t.activeAll),d.Cb(7),d.Sc("Fecha: ",d.jc(28,27,t.time),"."),d.Cb(5),d.qc("ngIf",!("admin@hidroelectrica.com"!=t.user)),d.Cb(3),d.qc("formGroup",t.group),d.Cb(5),d.qc("for",e),d.Cb(1),d.qc("openOnFocus",!0)("timeInterval",5),d.Cb(2),d.qc("matDatetimepicker",e)("max",t.tomorrow)("min",t.today),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.required),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMin),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMax),d.Cb(6),d.qc("data",t.list)("columns",t.columns)("length",t.total)("loading",t.isLoading)("pageOnFront",!1)("pageIndex",t.query.page)("pageSize",t.query.per_page)("pageSizeOptions",d.sc(31,He))}},directives:[K.a,J.c,i.m,J.a,Y.a,i.l,W.a,Y.e,Y.b,Oe.a,o.q,o.t,te.b,ae.a,i.n,o.y,o.r,o.k,X.c,X.h,ee.f,X.j,ee.c,o.d,h.b,ee.d,o.i,o.w,Ue.a,Ve.a,se.b,se.a,r.e,X.b],pipes:[i.b,$.d],styles:["mat-slider[_ngcontent-%COMP%]{pointer-events:none}"]}),e})();var De=a("MutI");const je=["chartH"],Re=["chartC"],ze=["chartA"];function Ge(e,t){if(1&e&&(d.Vb(0,"mat-list-item"),d.Qb(1,"img",37),d.Vb(2,"h3",38),d.Qc(3),d.Ub(),d.Vb(4,"p",38),d.Vb(5,"small",14),d.Qc(6),d.Ub(),d.Ub(),d.Vb(7,"mat-chip",39),d.Qc(8),d.Vb(9,"sup"),d.Qc(10,"3"),d.Ub(),d.Qc(11,"/s"),d.Ub(),d.Qb(12,"mat-divider"),d.Ub()),2&e){const e=t.$implicit;d.Cb(1),d.qc("src",e.img,d.Fc),d.Cb(2),d.Sc(" ",e.subject," "),d.Cb(3),d.Sc(" ",e.content," "),d.Cb(1),d.Eb(e.state_cl),d.Cb(1),d.Sc("",e.state," m")}}function Be(e,t){1&e&&(d.Vb(0,"mat-chip",40),d.Qc(1,"Detenida"),d.Ub())}function $e(e,t){1&e&&(d.Vb(0,"mat-chip",41),d.Qc(1,"Abriendo"),d.Ub())}function Ke(e,t){1&e&&(d.Vb(0,"mat-chip",42),d.Qc(1,"Cerrando"),d.Ub())}function Je(e,t){1&e&&(d.Vb(0,"mat-chip",43),d.Qc(1,"Error"),d.Ub())}function Ye(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1),d.ic(2,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Sc(" ",d.jc(2,1,"validations.required")," "))}function We(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"min"),d.Ub())}function Ze(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"max"),d.Ub())}const Xe=function(e){return["text-white",e]},et=function(){return["text-white","bg-cyan-800"]},tt=function(){return["text-white","bg-blue-gray-500"]},at=function(){return["text-white"]},st=function(){return["text-white","bg-gray-800"]};let it=(()=>{class e{constructor(e,t,a,s,i,r){this.ngZone=e,this.settings=t,this.service=a,this.snackBar=s,this.toastr=i,this.fb=r,this.stats={title_tsc:"Compuerta Ecologica",title_tstc:"T. sostenimiento Tanque de Carga",amount_ssc:50.2,amount_sstc:180.2,date:new Date,progress:{value_ssc:50,value_sstc:180},configuration:{time_tsc:2,time_tstc:4,limite_cssc:80,limite_csstc:100,alarm_cssc:2,alarm_csstc:2},color_sc:"bg-indigo-500",color_stc:"bg-blue-500"},this.chart1=null,this.options={chart:{height:280,type:"radialBar"},series:[0],colors:["#20E647"],plotOptions:{radialBar:{hollow:{margin:0,size:"70%",background:"#293450"},track:{dropShadow:{enabled:!0,top:2,left:0,blur:4,opacity:.15}},dataLabels:{name:{offsetY:-10,color:"#fff",fontSize:"13px"},value:{color:"#fff",fontSize:"30px",show:!0}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",gradientToColors:["#87D4F9"],stops:[0,100]}},stroke:{lineCap:"round"},labels:["Compuerta Ecol\xf3gica"]},this.states=[{code:"0",name:"0"},{code:"25",name:"25"},{code:"50",name:"50"},{code:"75",name:"75"},{code:"100",name:"100"}],this.active=!0,this.value=0,this.messages=[{img:"assets/images/avatars/caudal_eco.svg",subject:"Caudal Ecologico",content:"",state:0,state_cl:"bg-green-500"},{img:"assets/images/avatars/caudal_rio.svg",subject:"Caudal de Rio",content:"",state:0,state_cl:"bg-light-blue-500"},{img:"assets/images/avatars/caudal_turbinado.svg",subject:"Caudal Turbinado",content:"",state:0,state_cl:"bg-indigo-500"}],this.time=new S.a(e=>{setInterval(()=>e.next((new Date).toString()),1e3)}),this.form1=new o.j({}),this.model1={},this.options1={},this.fields1=[{type:"input",key:"nameRed",templateOptions:{label:"Nombre de la Red"}},{type:"input",key:"passwordRed",templateOptions:{type:"password",label:"Password de la red",placeholder:"Minimo 3 caracteres",required:!0,minLength:3}}],this.form2=new o.j({}),this.model2={},this.options2={},this.fields2=[{fieldGroupClassName:"row",fieldGroup:[{key:"aabce",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Alarma de Bajo Caudal",description:"",required:!1,onClick:e=>console.log("You clicked me!")}},{key:"amce",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Modulo Compuerta Ecologica",description:"",required:!1,onClick:e=>console.log("You clicked me!")}},{key:"tsce",type:"input",className:"col-sm-6",templateOptions:{label:"Tiempo de sostenimiento",description:"Tiempo de sostenimiento de Caudal Ecologico. [s]",required:!1}},{key:"pmce",type:"input",className:"col-sm-6",templateOptions:{label:"Porcentaje Caudal Ecol\xf3gico",description:"Porcentaje minimo  Caudal Ecol\xf3gico. [%]",required:!1}}]},{type:"checkbox",key:"confirm",templateOptions:{label:"Confirmar"}}],this.compuertaEcolo=0,this.dCE=[],this.dCR=[],this.dCT=[],this.dPCE=[],this.dACE=[],this.data$=this.service.messages$.pipe(Object(O.a)(e=>{"HISTORICO"===e.message&&this.getSeriesHistorico(e.dataHistoric),null!=e.espConf&&"esp3#1003"===e.espConf.ID&&(console.log("compuerta: ",e.espConf," - ",e.dataSave),this.loadConfigESP(e.espConf)),null!=e.dataSend&&"esp3#1003"===e.dataSend.ID&&(console.log("Data: ",e.dataSend),this.messages[0].state=e.dataSend.Caudal_Ecolo,this.messages[1].state=e.dataSend.Caudal_Rio,this.messages[2].state=e.dataSend.Caudal_Turbinado,this.messages[0].state_cl=1===e.dataSend.Alarma_Bajo_Caudal_Ecolo?"bg-red-500":"bg-green-500",this.compuertaEcolo=e.dataSend.Estado_Compuerta_Ecolo,this.active=0!=this.compuertaEcolo,this.filter(e.dataSend.Posicion_Compuerta_Ecolo))}),Object(U.a)(e=>{throw e}),Object(V.a)({error:e=>console.log("Error:",e),complete:()=>console.log("Connection Closed")})),this.chartOptionsH1={series:[{name:"",data:[]},{name:"",data:[]},{name:"",data:[]}],chart:{id:"chart2",type:"line",height:230,foreColor:"#eeeeee",toolbar:{autoSelected:"pan",show:!1}},colors:["#0097DE","#1EDE00","#F3F4FA"],stroke:{width:3},dataLabels:{enabled:!1},fill:{opacity:1},states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.15}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.35}}},markers:{size:0},xaxis:{type:"datetime"}},this.chartOptionsH2={series:[{name:"",data:[]},{name:"",data:[]},{name:"",data:[]}],chart:{id:"chart1",height:130,type:"area",foreColor:"#eeeeee",brush:{target:"chart2",enabled:!0},selection:{enabled:!0,xaxis:{min:(new Date).getTime(),max:(new Date).getTime()}}},colors:["#0097DE","#1EDE00","#F3F4FA"],fill:{type:"gradient",gradient:{opacityFrom:.91,opacityTo:.1}},xaxis:{type:"datetime",tooltip:{enabled:!1}},yaxis:{tickAmount:2}},this.chartOptionsC={series:[{name:"",data:[]}],chart:{type:"line",height:350,foreColor:"#eeeeee"},stroke:{curve:"stepline"},dataLabels:{enabled:!1},title:{text:"Alarmas",align:"left"},markers:{size:0,hover:{sizeOffset:4}},xaxis:{type:"datetime"},yaxis:{title:{text:"Alarma"},min:0,max:1}},this.chartOptionsA={series:[{name:"",data:[]}],chart:{type:"line",height:350,foreColor:"#eeeeee"},stroke:{curve:"stepline"},dataLabels:{enabled:!1},title:{text:"Alarmas",align:"left"},markers:{size:0,hover:{sizeOffset:4}},xaxis:{type:"datetime"},yaxis:{title:{text:"Alarma"},min:0,max:1}},this.group=r.group({dateTime:[new Date,o.x.required]})}ngOnInit(){this.notifySubscription=this.settings.notify.subscribe(e=>{}),this.data$.subscribe(),this.service.connect()}dateTimeSeries(e,t,a,s,i){this.chartOptionsH1.series=[{name:"Caudal Ecologico",data:e},{name:"Caudal de Rio",data:t},{name:"Caudal Turbinado",data:a}],this.chartOptionsH2.series=[{name:"Caudal Ecologico",data:e},{name:"Caudal de Rio",data:t},{name:"Caudal Turbinado",data:a}],this.chartOptionsC.series=[{name:"Posicion de la compuerta Ecologica",data:s}],this.chartOptionsA.series=[{name:"Alarma Bajo Caudal",data:i}]}getSeriesHistorico(e){e.forEach(e=>{this.dCE.push([e.sortKey-18e6,e.Caudal_Ecolo]),this.dCR.push([e.sortKey-18e6,e.Caudal_Rio]),this.dCT.push([e.sortKey-18e6,e.Caudal_Turbinado]),this.dPCE.push([e.sortKey-18e6,e.Posicion_Compuerta_Ecolo]),this.dACE.push([e.sortKey-18e6,e.Alarma_Bajo_Caudal_Ecolo])}),this.dateTimeSeries(this.dCE,this.dCR,this.dCT,this.dPCE,this.dACE)}ngAfterViewInit(){console.log("iniciado"),this.ngZone.runOutsideAngular(()=>this.initChart()),this.service.sendMessage({action:"config",message:"APP",esp:"esp3#1003"})}ngOnDestroy(){}initChart(){this.chart1=new ApexCharts(document.querySelector("#chart1"),this.options),this.chart1.render()}start(){this.value>100&&(this.value=100),console.warn("start open",this.value),this.service.sendMessage({action:"control",message:"ESPM3",espCLIENT:"esp3",espCode:"1003",control:"action",Consig_Apertura:this.value})}stop(){console.warn("stop open or close"),this.service.sendMessage({action:"control",message:"ESPM3",espCLIENT:"esp3",espCode:"1003",control:"action",Consig_Apertura:-1})}loadConfigESP(e){this.model2={tsce:e.Tiemp_Sost_Caud_Ecolo,pmce:e.Porc_Min_Caud_Ecolo,aabce:1===Number(e.Acti_Alarm_Baj_Caud_Ecolo),amce:1===Number(e.Acti_Mod_Comp_Ecolo)}}activeInput(){this.active=0!=this.compuertaEcolo}filter(e){this.chart1.updateSeries([e]),this.activeInput()}getHistorico(){let e=new Date(this.group.value.dateTime).getTime();console.log("fecha del Historico: ",e);let t={action:"config",message:"HISTORICO",esp:"esp3#1003",date:e};this.showToast("Consulta Historico de ESP Modulo 1"),this.service.sendMessage(t)}submit1(){this.form1.valid&&this.showToast(this.model1)}submit2(){if(this.form2.valid){this.activeInput();let e={action:"control",message:"ESPM3",espCLIENT:"esp3",espCode:"1003",control:"config",Acti_Alarm_Baj_Caud_Ecolo:this.model2.aabce?1:0,Acti_Mod_Comp_Ecolo:this.model2.amce?1:0,Tiemp_Sost_Caud_Ecolo:this.model2.tsce,Porc_Min_Caud_Ecolo:this.model2.pmce};this.service.sendMessage(e),this.showToast(e)}}showToast(e){this.toastr.success(JSON.stringify(e))}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.B),d.Pb(y.d),d.Pb(z),d.Pb(Se.a),d.Pb(G.b),d.Pb(o.f))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-visor-control-esp-three"]],viewQuery:function(e,t){if(1&e&&(d.Uc(je,!0),d.Uc(Re,!0),d.Uc(ze,!0)),2&e){let e;d.zc(e=d.ec())&&(t.chartH=e.first),d.zc(e=d.ec())&&(t.chartC=e.first),d.zc(e=d.ec())&&(t.chartA=e.first)}},decls:94,vars:78,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex.gt-sm","50","fxFlex","100",1,"matero-col"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"f-s-12","f-w-100"],["matInput","","type","number","min","0","max","100","maxlength","3","title","0 - 100 %",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","",1,"bg-green-500","text-white",3,"disabled","click"],["mat-raised-button","","color","warn",3,"click"],[1,"",3,"ngClass"],["id","chart1"],["class","f-s-12 f-w-20 bg-cyan-500","selected","",4,"ngIf"],["class","f-s-12 f-w-20 bg-green-500","selected","",4,"ngIf"],["class","f-s-12 f-w-20 bg-orange-500","selected","",4,"ngIf"],["class","f-s-12 f-w-20 bg-red-500","selected","",4,"ngIf"],[1,"text-muted"],["fxFlex.gt-sm","70","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],[3,"formGroup","ngSubmit"],[3,"model","fields","options","form"],["mat-raised-button","",1,"bg-light-green-900",3,"disabled"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","light-green-50"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],[3,"formGroup"],["matSuffix","",3,"for"],["startView","month","type","datetime",3,"openOnFocus","timeInterval"],["datetimePicker",""],["autocomplete","false","formControlName","dateTime","matInput","","required","",3,"matDatetimepicker","max","min"],[4,"ngIf"],["mat-mini-fab","","aria-label","Mini floating action button to increase the button counter by 1",3,"click"],["id","wrapper"],["id","chart-line"],[3,"series","chart","xaxis","dataLabels","colors","fill","markers","stroke"],["id","chart-line2"],[3,"series","chart","xaxis","colors","fill","yaxis"],["fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],["id","chart"],[3,"series","chart","xaxis","markers","stroke","dataLabels","title"],["matListAvatar","","alt","",3,"src"],["matLine",""],["selected","false"],["selected","",1,"f-s-12","f-w-20","bg-cyan-500"],["selected","",1,"f-s-12","f-w-20","bg-green-500"],["selected","",1,"f-s-12","f-w-20","bg-orange-500"],["selected","",1,"f-s-12","f-w-20","bg-red-500"]],template:function(e,t){if(1&e&&(d.Qb(0,"page-header"),d.Vb(1,"div",0),d.Vb(2,"div",1),d.Vb(3,"mat-card"),d.Vb(4,"mat-card-subtitle"),d.Qc(5,"Caudales"),d.Ub(),d.Vb(6,"mat-list"),d.Oc(7,Ge,13,6,"mat-list-item",2),d.Ub(),d.Ub(),d.Ub(),d.Vb(8,"div",1),d.Vb(9,"mat-card",3),d.Vb(10,"mat-card-title",4),d.Qc(11),d.Ub(),d.Vb(12,"mat-card-content"),d.Vb(13,"mat-form-field"),d.Vb(14,"mat-label"),d.Qc(15,"Apertura de Compuerta de 0 a 100"),d.Ub(),d.Vb(16,"input",5),d.dc("ngModelChange",function(e){return t.value=e})("ngModelChange",function(){return t.value}),d.Ub(),d.Ub(),d.Qc(17," \xa0 \xa0 "),d.Vb(18,"button",6),d.dc("click",function(){return t.start()}),d.Qc(19," Iniciar"),d.Ub(),d.Qc(20," \xa0 \xa0 "),d.Vb(21,"button",7),d.dc("click",function(){return t.stop()}),d.Qc(22," Parar"),d.Ub(),d.Vb(23,"section"),d.Vb(24,"mat-card",8),d.Qb(25,"div",9),d.Ub(),d.Ub(),d.Vb(26,"mat-chip-list"),d.Qc(27," Estado de Compuerta: "),d.Oc(28,Be,2,0,"mat-chip",10),d.Oc(29,$e,2,0,"mat-chip",11),d.Oc(30,Ke,2,0,"mat-chip",12),d.Oc(31,Je,2,0,"mat-chip",13),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(32,"small",14),d.Qc(33),d.ic(34,"async"),d.Ub(),d.Qb(35,"br"),d.Qb(36,"br"),d.Qb(37,"br"),d.Vb(38,"div",0),d.Vb(39,"div",15),d.Vb(40,"mat-card",3),d.Vb(41,"mat-card-title"),d.Qc(42,"Configuracion de Modulo"),d.Ub(),d.Vb(43,"form",16),d.dc("ngSubmit",function(){return t.submit2()}),d.Qb(44,"formly-form",17),d.Vb(45,"button",18),d.Qc(46,"Guardar"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(47,"div",19),d.Vb(48,"mat-card",3),d.Vb(49,"mat-card-title"),d.Qc(50,"Configuracion de Parametros"),d.Ub(),d.Vb(51,"form",16),d.dc("ngSubmit",function(){return t.submit1()}),d.Qb(52,"formly-form",17),d.Vb(53,"button",20),d.Qc(54,"Submit"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(55,"div",0),d.Vb(56,"div",21),d.Vb(57,"mat-card",3),d.Vb(58,"h1"),d.Qc(59,"Historial de Caudales"),d.Ub(),d.Vb(60,"form",22),d.Vb(61,"div",0),d.Vb(62,"mat-form-field"),d.Vb(63,"mat-placeholder"),d.Qc(64,"Fecha y Hora"),d.Ub(),d.Qb(65,"mat-datetimepicker-toggle",23),d.Qb(66,"mat-datetimepicker",24,25),d.Qb(68,"input",26),d.Oc(69,Ye,3,3,"mat-error",27),d.Oc(70,We,2,0,"mat-error",27),d.Oc(71,Ze,2,0,"mat-error",27),d.Ub(),d.Vb(72,"button",28),d.dc("click",function(){return t.getHistorico()}),d.Vb(73,"mat-icon"),d.Qc(74,"search"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(75,"div",0),d.Vb(76,"div",21),d.Vb(77,"div",29),d.Vb(78,"div",30),d.Qb(79,"apx-chart",31),d.Ub(),d.Vb(80,"div",32),d.Qb(81,"apx-chart",33),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(82,"div",34),d.Vb(83,"mat-card",3),d.Vb(84,"h1"),d.Qc(85,"Posicion de Compuerta"),d.Ub(),d.Vb(86,"div",35),d.Qb(87,"apx-chart",36),d.Ub(),d.Ub(),d.Ub(),d.Vb(88,"div",34),d.Vb(89,"mat-card",3),d.Vb(90,"h1"),d.Qc(91,"Alarmas de Bajo Caudal Ecologico"),d.Ub(),d.Vb(92,"div",35),d.Qb(93,"apx-chart",36),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e){const e=d.Ac(67);d.Cb(7),d.qc("ngForOf",t.messages),d.Cb(2),d.qc("ngClass",d.tc(69,Xe,t.stats.color_stc)),d.Cb(2),d.Rc(t.stats.title_tsc),d.Cb(5),d.qc("ngModel",t.value)("disabled",t.active),d.Cb(2),d.qc("disabled",t.active),d.Cb(6),d.qc("ngClass",d.tc(71,Xe,t.stats.color_sc)),d.Cb(4),d.qc("ngIf",0===t.compuertaEcolo),d.Cb(1),d.qc("ngIf",1===t.compuertaEcolo),d.Cb(1),d.qc("ngIf",2===t.compuertaEcolo),d.Cb(1),d.qc("ngIf",3===t.compuertaEcolo),d.Cb(2),d.Sc("Fecha: ",d.jc(34,67,t.time),"."),d.Cb(7),d.qc("ngClass",d.sc(73,et)),d.Cb(3),d.qc("formGroup",t.form2),d.Cb(1),d.qc("model",t.model2)("fields",t.fields2)("options",t.options2)("form",t.form2),d.Cb(1),d.qc("disabled",!t.form2.valid),d.Cb(3),d.qc("ngClass",d.sc(74,tt)),d.Cb(3),d.qc("formGroup",t.form1),d.Cb(1),d.qc("model",t.model1)("fields",t.fields1)("options",t.options1)("form",t.form1),d.Cb(1),d.qc("disabled",!t.form1.valid),d.Cb(4),d.qc("ngClass",d.sc(75,at)),d.Cb(3),d.qc("formGroup",t.group),d.Cb(5),d.qc("for",e),d.Cb(1),d.qc("openOnFocus",!0)("timeInterval",5),d.Cb(2),d.qc("matDatetimepicker",e)("max",t.tomorrow)("min",t.today),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.required),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMin),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMax),d.Cb(8),d.qc("series",t.chartOptionsH1.series)("chart",t.chartOptionsH1.chart)("xaxis",t.chartOptionsH1.xaxis)("dataLabels",t.chartOptionsH1.dataLabels)("colors",t.chartOptionsH1.colors)("fill",t.chartOptionsH1.fill)("markers",t.chartOptionsH1.markers)("stroke",t.chartOptionsH1.stroke),d.Cb(2),d.qc("series",t.chartOptionsH2.series)("chart",t.chartOptionsH2.chart)("xaxis",t.chartOptionsH2.xaxis)("colors",t.chartOptionsH2.colors)("fill",t.chartOptionsH2.fill)("yaxis",t.chartOptionsH2.yaxis),d.Cb(2),d.qc("ngClass",d.sc(76,st)),d.Cb(4),d.qc("series",t.chartOptionsC.series)("chart",t.chartOptionsC.chart)("xaxis",t.chartOptionsC.xaxis)("markers",t.chartOptionsC.markers)("stroke",t.chartOptionsC.stroke)("dataLabels",t.chartOptionsC.dataLabels)("title",t.chartOptionsC.title),d.Cb(2),d.qc("ngClass",d.sc(77,st)),d.Cb(4),d.qc("series",t.chartOptionsA.series)("chart",t.chartOptionsA.chart)("xaxis",t.chartOptionsA.xaxis)("markers",t.chartOptionsA.markers)("stroke",t.chartOptionsA.stroke)("dataLabels",t.chartOptionsA.dataLabels)("title",t.chartOptionsA.title)}},directives:[K.a,J.c,J.a,Y.a,Y.d,De.a,i.m,i.l,W.a,Y.e,Y.b,X.c,X.g,h.b,o.u,o.d,o.m,o.q,o.t,te.b,se.b,i.n,o.y,o.r,o.k,r.e,X.h,ee.f,X.j,ee.c,ee.d,o.i,o.w,ae.a,c.a,De.c,De.b,B.k,se.a,Ve.a,X.b],pipes:[i.b,$.d],styles:[""]}),e})();var ot=a("Qu3c"),rt=a("TU8p");const ct=["chart"];function nt(e,t){if(1&e&&d.Qb(0,"span",39),2&e){const e=d.hc(2);d.qc("matBadge",e.motor)}}function lt(e,t){if(1&e&&d.Qb(0,"span",39),2&e){const e=d.hc(2);d.qc("matBadge",e.motor)}}function dt(e,t){if(1&e&&(d.Vb(0,"mat-list-item"),d.Qb(1,"img",35),d.Vb(2,"h3",36),d.Qc(3),d.Ub(),d.Vb(4,"p",36),d.Vb(5,"small",14),d.Qc(6),d.Ub(),d.Ub(),d.Vb(7,"mat-chip",37),d.Qc(8),d.Ub(),d.Oc(9,nt,1,1,"span",38),d.Oc(10,lt,1,1,"span",38),d.Qb(11,"mat-divider"),d.Ub()),2&e){const e=t.$implicit,a=t.index,s=d.hc();d.Cb(1),d.qc("src",e.img,d.Fc),d.Cb(2),d.Sc(" ",e.subject," "),d.Cb(3),d.Sc(" ",e.content," "),d.Cb(1),d.Eb(e.state_cl),d.Cb(1),d.Sc("",e.state," "),d.Cb(1),d.qc("ngIf",3===a&&1===s.motor),d.Cb(1),d.qc("ngIf",3===a&&2===s.motor)}}function mt(e,t){1&e&&(d.Vb(0,"mat-chip",40),d.Qc(1,"Detenida"),d.Ub())}function bt(e,t){1&e&&(d.Vb(0,"mat-chip",41),d.Qc(1,"Abriendo"),d.Ub())}function pt(e,t){1&e&&(d.Vb(0,"mat-chip",42),d.Qc(1,"Cerrando"),d.Ub())}function ht(e,t){1&e&&(d.Vb(0,"mat-chip",43),d.Qc(1,"Error"),d.Ub())}function ut(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1),d.ic(2,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Sc(" ",d.jc(2,1,"validations.required")," "))}function gt(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"min"),d.Ub())}function ft(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"max"),d.Ub())}const Ct=function(e){return["text-white",e]},xt=function(){return["text-white","bg-cyan-800"]},_t=function(){return["text-white","bg-blue-gray-500"]};let vt=(()=>{class e{constructor(e,t,a,s,i,r){this.ngZone=e,this.settings=t,this.service=a,this.snackBar=s,this.toastr=i,this.fb=r,this.dpa=[],this.dta=[],this.dna=[],this.dapa=[],this.data=[],this.dana=[],this.dpcr=[],this.chart=new c.a,this.commonOptions={dataLabels:{enabled:!1},stroke:{curve:"straight"},toolbar:{tools:{selection:!1}},markers:{size:6,hover:{size:10}},tooltip:{followCursor:!1,theme:"dark",x:{show:!1},marker:{show:!1},y:{title:{formatter:function(){return""}}}},grid:{clipMarkers:!1},xaxis:{type:"datetime",title:{text:"Tiempo"}}},this.stats={title_tsc:"Compuerta Radial",title_tstc:"T. sostenimiento Tanque de Carga",amount_ssc:50.2,amount_sstc:180.2,date:new Date,progress:{value_ssc:50,value_sstc:180},configuration:{time_tsc:2,time_tstc:4,limite_cssc:80,limite_csstc:100,alarm_cssc:2,alarm_csstc:2},color_sc:"bg-indigo-500",color_stc:"bg-blue-500"},this.compuertaChart=null,this.options={chart:{height:280,type:"radialBar",foreColor:"#eeeeee"},series:[0],colors:["#20E647"],plotOptions:{radialBar:{hollow:{margin:0,size:"70%",background:"#293450"},track:{dropShadow:{enabled:!0,top:2,left:0,blur:4,opacity:.15}},dataLabels:{name:{offsetY:-10,color:"#fff",fontSize:"13px"},value:{color:"#fff",fontSize:"30px",show:!0}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",gradientToColors:["#87D4F9"],stops:[0,100]}},stroke:{lineCap:"round"},labels:["Compuerta Radial"]},this.compuertaHChart=null,this.optionsHC={series:[{name:"Historicos Posicion de la Compuerta",data:[]}],chart:{height:350,type:"line",foreColor:"#eeeeee",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#77B6EA"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},title:{text:"Posicion de la Compuerta Radial",align:"left"},grid:{borderColor:"#e7e7e7",row:{colors:["#f3f3f3","transparent"],opacity:.1}},markers:{size:1},xaxis:{categories:["Jan","Feb","Mar","Apr","May","Jun","Jul"],title:{text:"Tiempo"},colors:"#77B6EA"},yaxis:{title:{text:"Posici\xf3n",colors:["#77B6EA"]},colors:"#77B6EA",min:0,max:100},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}},this.states=[{code:"0",name:"0"},{code:"25",name:"25"},{code:"50",name:"50"},{code:"75",name:"75"},{code:"100",name:"100"}],this.active=!0,this.value=10,this.filteredStates=this.states,this.messages=[{img:"assets/images/avatars/aceite_img.svg",subject:"Presion de Aceite",content:"Presion actual del aceite.",state:"0",state_cl:"bg-green-500"},{img:"assets/images/avatars/temperatura_aceite.svg",subject:"Temperatura del Aceite",content:"Estado actual de la temperatura del Aceite.",state:"0",state_cl:"bg-orange-500"},{img:"assets/images/avatars/nivel_aceite.svg",subject:"Nivel de Aceite",content:"Nivel del Aceite Actual.",state:"0",state_cl:"bg-red-500"},{img:"assets/images/avatars/motor.svg",subject:"Motor",content:"Estado actual del Motor.",state:"?",state_cl:"bg-green-500"}],this.time=new S.a(e=>{setInterval(()=>e.next((new Date).toString()),1e3)}),this.form1=new o.j({}),this.model1={},this.options1={},this.fields1=[{type:"input",key:"nameRed",templateOptions:{label:"Nombre de la Red"}},{type:"input",key:"passwordRed",templateOptions:{type:"password",label:"Password de la red",placeholder:"Minimo 3 caracteres",required:!0,minLength:3}}],this.form2=new o.j({}),this.model2={},this.options2={formState:{awesomeIsForced:!1}},this.fields2=[{fieldGroupClassName:"row",fieldGroup:[{key:"albc",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Alarmas",description:"",required:!1}},{key:"amce",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Modulo Compuerta Radial",description:"",required:!1,onClick:e=>console.log("You clicked me!")}},{key:"lmp",type:"input",className:"col-sm-4",templateOptions:{label:"Minima Presion de Aceite [PSI]",description:"",required:!1}},{key:"lmt",type:"input",className:"col-sm-4",templateOptions:{label:"Temperatura Maxima de Aceite [\xb0C]",description:"",required:!1}},{key:"lbna",type:"input",className:"col-sm-4",templateOptions:{label:"Minimo Nivel de Aceite [cm]",description:"",required:!1}},{key:"tsmp",type:"input",className:"col-sm-4",templateOptions:{label:"Tiempo de Sostenimiento de Presion [s]",description:"",required:!1}},{key:"tsmt",type:"input",className:"col-sm-4",templateOptions:{label:"Tiempo de sostenimiento de Temperatura [s]",description:"",required:!1}},{key:"tsbna",type:"input",className:"col-sm-4",templateOptions:{label:"Tiempo de Sostenimiento de Nivel de Aceite [s]",description:"",required:!1}}]},{type:"checkbox",key:"confirm",templateOptions:{label:"Confirmar"}}],this.compuertaRadial=0,this.motor=0,this.data$=this.service.messages$.pipe(Object(O.a)(e=>{"HISTORICO"===e.message&&this.getSeriesHistorico(e.dataHistoric),null!=e.espConf&&"esp4#1004"===e.espConf.ID&&this.loadConfigESP(e.espConf),null!=e.dataSend&&"esp4#1004"===e.dataSend.ID&&(console.log("Data: ",e.dataSend),this.messages[0].state=e.dataSend.Presion_Aceite+" psi",this.messages[0].state_cl=1===e.dataSend.Alarm_Pres_Aceite?"bg-red-500":"bg-green-500",this.messages[1].state=e.dataSend.Temp_Aceite+" \xb0C",this.messages[1].state_cl=1===e.dataSend.Alarm_Temp_Aceite?"bg-red-500":"bg-green-500",this.messages[2].state=e.dataSend.Nivel_Aceite+" cm",this.messages[2].state_cl=1===e.dataSend.Alarm_Niv_Aceite?"bg-red-500":"bg-green-500",this.messages[3].state=e.dataSend.Est_Motor,this.messages[3].state_cl="Normal"===e.dataSend.Est_Motor?"bg-green-500":"bg-red-500",this.motor=e.dataSend.Motor,this.compuertaRadial=e.dataSend.Estado_Compuerta_Radial,this.active=0!=this.compuertaRadial,this.filter(e.dataSend.Pos_Compu_Radial),this.compuertaRadial=e.dataSend.Estado_Compuerta_Radial)}),Object(U.a)(e=>{throw e}),Object(V.a)({error:e=>console.log("Error:",e),complete:()=>console.log("Connection Closed")})),this.initCharts(),this.group=r.group({dateTime:[new Date,o.x.required]})}initCharts(){this.chart1options={series:[{name:"Presion de Aceite",data:[]}],chart:{id:"pa",group:"estado",type:"line",foreColor:"#eeeeee",height:160},colors:["#008FFB"],yaxis:{title:{text:"Presion de Aceite",colors:["#77B6EA"]},tickAmount:2,labels:{minWidth:40}}},this.chart2options={series:[{name:"Temperatura del Aceite",data:[]}],chart:{id:"ta",group:"estado",type:"line",foreColor:"#eeeeee",height:160},colors:["#546E7A"],yaxis:{title:{text:"Temperatura de Aceite",colors:["#77B6EA"]},tickAmount:2,labels:{minWidth:40}}},this.chart3options={series:[{name:"Nivel de Aceite",data:[]}],chart:{id:"na",group:"estado",type:"area",foreColor:"#eeeeee",height:160},colors:["#00E396"],yaxis:{title:{text:"Nivel de Aceite",colors:["#77B6EA"]},tickAmount:2,labels:{minWidth:40}}},this.chartA1options={series:[{name:"Alarma Presion de Aceite",data:[]}],chart:{id:"apa",group:"alarma",type:"line",foreColor:"#eeeeee",height:160},colors:["#008FFB"],yaxis:{title:{text:"Alarm. Presion A.",colors:["#77B6EA"]},tickAmount:2,labels:{minWidth:40}}},this.chartA2options={series:[{name:"Alarma Temperatura del Aceite",data:[]}],chart:{id:"ata",group:"alarma",type:"line",foreColor:"#eeeeee",height:160},colors:["#546E7A"],yaxis:{title:{text:"Alarm. Temperatura A.",colors:["#77B6EA"]},tickAmount:2,labels:{minWidth:40}}},this.chartA3options={series:[{name:"Alarma Nivel de Aceite",data:[]}],chart:{id:"ana",group:"alarma",type:"area",foreColor:"#eeeeee",height:160},colors:["#00E396"],yaxis:{title:{text:"Alarm. Nivel A.",colors:["#77B6EA"]},tickAmount:2,labels:{minWidth:40}}}}dateTimeSeries(e,t,a,s,i,o,r){this.chart1options.series=[{data:e}],this.chart2options.series=[{data:t}],this.chart3options.series=[{data:a}],this.chartA1options.series=[{data:s}],this.chartA2options.series=[{data:i}],this.chartA3options.series=[{data:o}],this.optionsHC.series=[{name:"Historicos Posicion de la Compuerta",data:r}]}getSeriesHistorico(e){e.forEach(e=>{this.dpa.push([e.sortKey-18e6,e.Presion_Aceite]),this.dta.push([e.sortKey-18e6,e.Temp_Aceite]),this.dna.push([e.sortKey-18e6,e.Nivel_Aceite]),this.dapa.push([e.sortKey-18e6,e.Alarm_Pres_Aceite]),this.data.push([e.sortKey-18e6,e.Alarm_Temp_Aceite]),this.dana.push([e.sortKey-18e6,e.Alarm_Niv_Aceite]),this.dpcr.push([e.sortKey-18e6,e.Pos_Compu_Radial])}),this.dateTimeSeries(this.dpa.reverse(),this.dta.reverse(),this.dna.reverse(),this.dapa.reverse(),this.data.reverse(),this.dana.reverse(),this.dpcr.reverse())}generateDayWiseTimeSeries(e,t,a){let s=0,i=[];for(;s<t;){var o=e,r=Math.floor(Math.random()*(a.max-a.min+1))+a.min;i.push([o,r]),e+=864e5,s++}return i}ngOnInit(){this.data$.subscribe(),this.service.connect()}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>this.initChart()),this.service.sendMessage({action:"config",message:"APP",esp:"esp4#1004"})}ngOnDestroy(){this.compuertaChart&&this.compuertaChart.destroy()}initChart(){this.compuertaChart=new ApexCharts(document.querySelector("#chart1"),this.options),this.compuertaChart.render()}start(){this.value>100&&(this.value=100),console.warn("start open",this.value),this.service.sendMessage({action:"control",message:"ESPM4",espCLIENT:"esp4",espCode:"1004",control:"action",Consig_Apertura:this.value,Ejecutar_Consig:1,Parar_Accion:0})}stop(){console.warn("stop open"),this.service.sendMessage({action:"control",message:"ESPM4",espCLIENT:"esp4",espCode:"1004",control:"action",Consig_Apertura:this.value,Ejecutar_Consig:0,Parar_Accion:1})}getHistorico(){let e=new Date(this.group.value.dateTime).getTime();console.log("fecha del Historico: ",e);let t={action:"config",message:"HISTORICO",esp:"esp4#1004",date:e};this.showToast("Consulta Historico de ESP Modulo 5"),this.service.sendMessage(t)}activeInput(){this.active=0!=this.compuertaRadial}filter(e){this.compuertaChart.updateSeries([e]),this.activeInput()}loadConfigESP(e){this.model2={albc:1===Number(e.Acti_Alarm_Fallas),amce:1===Number(e.Acti_Mod_Comp_Radial),lmp:e.Limt_Max_Presion,lmt:e.Limt_Max_Temperatura,lbna:e.Limt_Baj_Niv_Aceite,tsmp:e.Tiemp_Sost_Max_Presion,tsmt:e.Tiemp_Sost_Max_Temperatura,tsbna:e.Tiemp_Sost_Baj_Niv_Aceite}}submit1(){this.form1.valid&&this.showToast(this.model1)}submit2(){if(this.form2.valid){this.activeInput();let e={action:"control",message:"ESPM4",espCLIENT:"esp4",espCode:"1004",control:"config",Acti_Alarms:this.model2.albc?1:0,Acti_Mod_Comp_Radial:this.model2.amce?1:0,Limt_Max_Presion:this.model2.lmp,Limt_Max_Temperatura:this.model2.lmt,Limt_Baj_Niv_Aceite:this.model2.lbna,Tiemp_Sost_Max_Presion:this.model2.tsmp,Tiemp_Sost_Max_Temperatura:this.model2.tsmt,Tiemp_Sost_Baj_Niv_Aceite:this.model2.tsbna};this.service.sendMessage(e),this.showToast(e)}}showToast(e){this.toastr.success(JSON.stringify(e))}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.B),d.Pb(y.d),d.Pb(z),d.Pb(Se.a),d.Pb(G.b),d.Pb(o.f))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-visor-control-esp-four"]],viewQuery:function(e,t){if(1&e&&d.Uc(ct,!0),2&e){let e;d.zc(e=d.ec())&&(t.chart=e.first)}},decls:94,vars:116,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex.gt-sm","50","fxFlex","100",1,"matero-col"],[4,"ngFor","ngForOf"],[3,"ngClass"],[1,"f-s-12","f-w-100"],["matInput","","type","number","min","0","max","100","maxlength","3","title","0 - 100 %",3,"ngModel","disabled","ngModelChange"],["mat-raised-button","",1,"bg-green-500","text-white",3,"disabled","click"],["mat-raised-button","","color","warn",3,"disabled","click"],[1,"",3,"ngClass"],["id","chart1"],["class","f-s-12 f-w-20 bg-cyan-500","selected","",4,"ngIf"],["class","f-s-12 f-w-20 bg-green-500","selected","",4,"ngIf"],["class","f-s-12 f-w-20 bg-orange-500","selected","",4,"ngIf"],["class","f-s-12 f-w-20 bg-red-500","selected","",4,"ngIf"],[1,"text-muted"],["fxFlex.gt-sm","70","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],[3,"formGroup","ngSubmit"],[3,"model","fields","options","form"],["mat-raised-button","",1,"bg-light-green-900",3,"disabled"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","light-green-50"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex","100","fxFlex.gt-sm","100",1,"matero-col"],[3,"formGroup"],["matSuffix","",3,"for"],["startView","month","type","datetime",3,"openOnFocus","timeInterval"],["datetimePicker",""],["autocomplete","false","formControlName","dateTime","matInput","","required","",3,"matDatetimepicker","max","min"],[4,"ngIf"],["mat-mini-fab","","aria-label","Mini floating action button to increase the button counter by 1",3,"click"],["id","chart"],[3,"series","chart","xaxis","stroke","colors","dataLabels","legend","markers","grid","yaxis","title"],["fxFlex","100","fxFlex.gt-sm","70",1,"matero-col"],[3,"chart","colors","dataLabels","grid","markers","series","stroke","tooltip","xaxis","yaxis"],[3,"series","chart","colors","yaxis","dataLabels","markers","stroke","grid","xaxis","tooltip"],["fxFlex","100","fxFlex.gt-sm","30",1,"matero-col"],["matListAvatar","","alt","",3,"src"],["matLine",""],["selected","false"],["matBadgeColor","accent","mat-raised-button","","matTooltip","Motor#",3,"matBadge",4,"ngIf"],["matBadgeColor","accent","mat-raised-button","","matTooltip","Motor#",3,"matBadge"],["selected","",1,"f-s-12","f-w-20","bg-cyan-500"],["selected","",1,"f-s-12","f-w-20","bg-green-500"],["selected","",1,"f-s-12","f-w-20","bg-orange-500"],["selected","",1,"f-s-12","f-w-20","bg-red-500"]],template:function(e,t){if(1&e&&(d.Qb(0,"page-header"),d.Vb(1,"div",0),d.Vb(2,"div",1),d.Vb(3,"mat-card"),d.Vb(4,"mat-card-subtitle"),d.Qc(5,"Estado elementos"),d.Ub(),d.Vb(6,"mat-list"),d.Oc(7,dt,12,8,"mat-list-item",2),d.Ub(),d.Ub(),d.Ub(),d.Vb(8,"div",1),d.Vb(9,"mat-card",3),d.Vb(10,"mat-card-title",4),d.Qc(11),d.Ub(),d.Vb(12,"mat-card-content"),d.Vb(13,"mat-form-field"),d.Vb(14,"mat-label"),d.Qc(15,"Apertura de Compuerta de 0 a 100"),d.Ub(),d.Vb(16,"input",5),d.dc("ngModelChange",function(e){return t.value=e})("ngModelChange",function(){return t.value}),d.Ub(),d.Ub(),d.Qc(17," \xa0 \xa0 "),d.Vb(18,"button",6),d.dc("click",function(){return t.start()}),d.Qc(19,"Iniciar"),d.Ub(),d.Qc(20," \xa0 \xa0 "),d.Vb(21,"button",7),d.dc("click",function(){return t.stop()}),d.Qc(22,"Parar Acci\xf3n"),d.Ub(),d.Vb(23,"section"),d.Vb(24,"mat-card",8),d.Qb(25,"div",9),d.Ub(),d.Ub(),d.Vb(26,"mat-chip-list"),d.Qc(27," Estado de Compuerta: "),d.Oc(28,mt,2,0,"mat-chip",10),d.Oc(29,bt,2,0,"mat-chip",11),d.Oc(30,pt,2,0,"mat-chip",12),d.Oc(31,ht,2,0,"mat-chip",13),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(32,"small",14),d.Qc(33),d.ic(34,"async"),d.Ub(),d.Qb(35,"br"),d.Qb(36,"br"),d.Qb(37,"br"),d.Vb(38,"div",0),d.Vb(39,"div",15),d.Vb(40,"mat-card",3),d.Vb(41,"mat-card-title"),d.Qc(42,"Configuracion de Modulo"),d.Ub(),d.Vb(43,"form",16),d.dc("ngSubmit",function(){return t.submit2()}),d.Qb(44,"formly-form",17),d.Vb(45,"button",18),d.Qc(46,"Guardar"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(47,"div",19),d.Vb(48,"mat-card",3),d.Vb(49,"mat-card-title"),d.Qc(50,"Configuracion de Parametros"),d.Ub(),d.Vb(51,"form",16),d.dc("ngSubmit",function(){return t.submit1()}),d.Qb(52,"formly-form",17),d.Vb(53,"button",20),d.Qc(54,"Submit"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(55,"div",0),d.Vb(56,"div",21),d.Vb(57,"mat-card"),d.Vb(58,"h1"),d.Qc(59,"Historial de Comportamiento de Compuerta Radial"),d.Ub(),d.Vb(60,"form",22),d.Vb(61,"div",0),d.Vb(62,"mat-form-field"),d.Vb(63,"mat-placeholder"),d.Qc(64,"Fecha y Hora"),d.Ub(),d.Qb(65,"mat-datetimepicker-toggle",23),d.Qb(66,"mat-datetimepicker",24,25),d.Qb(68,"input",26),d.Oc(69,ut,3,3,"mat-error",27),d.Oc(70,gt,2,0,"mat-error",27),d.Oc(71,ft,2,0,"mat-error",27),d.Ub(),d.Vb(72,"button",28),d.dc("click",function(){return t.getHistorico()}),d.Vb(73,"mat-icon"),d.Qc(74,"search"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(75,"mat-card-subtitle"),d.Qc(76,"Compuerta"),d.Ub(),d.Vb(77,"div",29),d.Qb(78,"apx-chart",30),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(79,"div",0),d.Vb(80,"div",31),d.Vb(81,"mat-card"),d.Vb(82,"mat-card-subtitle"),d.Qc(83,"Historial de Estado de Elementos"),d.Ub(),d.Qb(84,"apx-chart",32),d.Qb(85,"apx-chart",33),d.Qb(86,"apx-chart",33),d.Ub(),d.Ub(),d.Vb(87,"div",34),d.Vb(88,"mat-card"),d.Vb(89,"mat-card-subtitle"),d.Qc(90,"Alarmas"),d.Ub(),d.Qb(91,"apx-chart",33),d.Qb(92,"apx-chart",33),d.Qb(93,"apx-chart",33),d.Ub(),d.Ub(),d.Ub()),2&e){const e=d.Ac(67);d.Cb(7),d.qc("ngForOf",t.messages),d.Cb(2),d.qc("ngClass",d.tc(110,Ct,t.stats.color_stc)),d.Cb(2),d.Rc(t.stats.title_tsc),d.Cb(5),d.qc("ngModel",t.value)("disabled",t.active),d.Cb(2),d.qc("disabled",t.active),d.Cb(3),d.qc("disabled",!t.active),d.Cb(3),d.qc("ngClass",d.tc(112,Ct,t.stats.color_sc)),d.Cb(4),d.qc("ngIf",0===t.compuertaRadial),d.Cb(1),d.qc("ngIf",1===t.compuertaRadial),d.Cb(1),d.qc("ngIf",2===t.compuertaRadial),d.Cb(1),d.qc("ngIf",3===t.compuertaRadial),d.Cb(2),d.Sc("Fecha: ",d.jc(34,108,t.time),"."),d.Cb(7),d.qc("ngClass",d.sc(114,xt)),d.Cb(3),d.qc("formGroup",t.form2),d.Cb(1),d.qc("model",t.model2)("fields",t.fields2)("options",t.options2)("form",t.form2),d.Cb(1),d.qc("disabled",!t.form2.valid),d.Cb(3),d.qc("ngClass",d.sc(115,_t)),d.Cb(3),d.qc("formGroup",t.form1),d.Cb(1),d.qc("model",t.model1)("fields",t.fields1)("options",t.options1)("form",t.form1),d.Cb(1),d.qc("disabled",!t.form1.valid),d.Cb(7),d.qc("formGroup",t.group),d.Cb(5),d.qc("for",e),d.Cb(1),d.qc("openOnFocus",!0)("timeInterval",5),d.Cb(2),d.qc("matDatetimepicker",e)("max",t.tomorrow)("min",t.today),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.required),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMin),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMax),d.Cb(7),d.qc("series",t.optionsHC.series)("chart",t.optionsHC.chart)("xaxis",t.optionsHC.xaxis)("stroke",t.optionsHC.stroke)("colors",t.optionsHC.colors)("dataLabels",t.optionsHC.dataLabels)("legend",t.optionsHC.legend)("markers",t.optionsHC.markers)("grid",t.optionsHC.grid)("yaxis",t.optionsHC.yaxis)("title",t.optionsHC.title),d.Cb(6),d.qc("chart",t.chart1options.chart)("colors",t.chart1options.colors)("dataLabels",t.commonOptions.dataLabels)("grid",t.commonOptions.grid)("markers",t.commonOptions.markers)("series",t.chart1options.series)("stroke",t.commonOptions.stroke)("tooltip",t.commonOptions.tooltip)("xaxis",t.commonOptions.xaxis)("yaxis",t.chart1options.yaxis),d.Cb(1),d.qc("series",t.chart2options.series)("chart",t.chart2options.chart)("colors",t.chart2options.colors)("yaxis",t.chart2options.yaxis)("dataLabels",t.commonOptions.dataLabels)("markers",t.commonOptions.markers)("stroke",t.commonOptions.stroke)("grid",t.commonOptions.grid)("xaxis",t.commonOptions.xaxis)("tooltip",t.commonOptions.tooltip),d.Cb(1),d.qc("series",t.chart3options.series)("chart",t.chart3options.chart)("colors",t.chart3options.colors)("yaxis",t.chart3options.yaxis)("dataLabels",t.commonOptions.dataLabels)("markers",t.commonOptions.markers)("stroke",t.commonOptions.stroke)("grid",t.commonOptions.grid)("xaxis",t.commonOptions.xaxis)("tooltip",t.commonOptions.tooltip),d.Cb(5),d.qc("series",t.chartA1options.series)("chart",t.chart1options.chart)("colors",t.chartA1options.colors)("yaxis",t.chartA1options.yaxis)("dataLabels",t.commonOptions.dataLabels)("markers",t.commonOptions.markers)("stroke",t.commonOptions.stroke)("grid",t.commonOptions.grid)("xaxis",t.commonOptions.xaxis)("tooltip",t.commonOptions.tooltip),d.Cb(1),d.qc("series",t.chartA2options.series)("chart",t.chartA2options.chart)("colors",t.chartA2options.colors)("yaxis",t.chartA2options.yaxis)("dataLabels",t.commonOptions.dataLabels)("markers",t.commonOptions.markers)("stroke",t.commonOptions.stroke)("grid",t.commonOptions.grid)("xaxis",t.commonOptions.xaxis)("tooltip",t.commonOptions.tooltip),d.Cb(1),d.qc("series",t.chartA3options.series)("chart",t.chartA3options.chart)("colors",t.chartA3options.colors)("yaxis",t.chartA3options.yaxis)("dataLabels",t.commonOptions.dataLabels)("markers",t.commonOptions.markers)("stroke",t.commonOptions.stroke)("grid",t.commonOptions.grid)("xaxis",t.commonOptions.xaxis)("tooltip",t.commonOptions.tooltip)}},directives:[K.a,J.c,J.a,Y.a,Y.d,De.a,i.m,i.l,W.a,Y.e,Y.b,X.c,X.g,h.b,o.u,o.d,o.m,o.q,o.t,te.b,se.b,i.n,o.y,o.r,o.k,r.e,X.h,ee.f,X.j,ee.c,ee.d,o.i,o.w,ae.a,c.a,De.c,De.b,B.k,se.a,Ve.a,ot.a,rt.a,X.b],pipes:[i.b,$.d],styles:[""]}),e})();var yt=a("/1cH");const St=["chart-ns"],Ot=["chart-hn"],Ut=["chart-hacs"],Vt=["chart-hpl"];function kt(e,t){1&e&&(d.Vb(0,"mat-chip",46),d.Qc(1," Alto nivel de Sedimentos "),d.Ub())}function wt(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-list",47),d.Vb(1,"mat-list-item"),d.Vb(2,"button",48),d.dc("click",function(){return d.Dc(e),d.hc().relavar()}),d.Vb(3,"span",49),d.Vb(4,"mat-icon",50),d.Qc(5," autorenew "),d.Ub(),d.Qc(6," Relavar "),d.Ub(),d.Qb(7,"span",51),d.Qb(8,"span",52),d.Ub(),d.Ub(),d.Qc(9," \xa0\xa0 "),d.Qb(10,"mat-divider",53),d.Qc(11," \xa0\xa0 "),d.Vb(12,"mat-list-item"),d.Vb(13,"button",54),d.dc("click",function(){return d.Dc(e),d.hc().continuar()}),d.Vb(14,"span",49),d.Vb(15,"mat-icon",50),d.Qc(16," done "),d.Ub(),d.Qc(17," Continuar "),d.Ub(),d.Qb(18,"span",51),d.Qb(19,"span",52),d.Ub(),d.Ub(),d.Ub()}2&e&&(d.Cb(10),d.qc("vertical",!0))}function qt(e,t){if(1&e&&(d.Vb(0,"mat-option",55),d.Vb(1,"span"),d.Qc(2),d.Ub(),d.Ub()),2&e){const e=t.$implicit;d.qc("value",e.name),d.Cb(2),d.Rc(e.name)}}function At(e,t){if(1&e){const e=d.Wb();d.Vb(0,"section"),d.Vb(1,"button",56),d.dc("click",function(){return d.Dc(e),d.hc().start()}),d.Qc(2,"Iniciar"),d.Ub(),d.Qc(3," \xa0 \xa0 "),d.Vb(4,"button",57),d.dc("click",function(){return d.Dc(e),d.hc().stop()}),d.Qc(5,"Parar"),d.Ub(),d.Ub()}if(2&e){const e=d.hc();d.Cb(1),d.qc("disabled",!(0===e.state_proces||2===e.state_proces)),d.Cb(3),d.qc("disabled",!(1===e.state_proces))}}function Tt(e,t){1&e&&(d.Vb(0,"section"),d.Vb(1,"mat-list-item"),d.Vb(2,"mat-chip",46),d.Qc(3,"ERROR EN ELPROCESO"),d.Ub(),d.Ub(),d.Ub())}function Qt(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",58),d.Qc(3," Detenida "),d.Ub(),d.Ub())}function Pt(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",59),d.Qc(3," Abriendo "),d.Ub(),d.Ub())}function Lt(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",59),d.Qc(3," Cerrando "),d.Ub(),d.Ub())}function Et(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",60),d.Qc(3," Error "),d.Ub(),d.Ub())}function It(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",58),d.Qc(3," Detenida "),d.Ub(),d.Ub())}function Ft(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",59),d.Qc(3," Abriendo "),d.Ub(),d.Ub())}function Nt(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",59),d.Qc(3," Cerrando "),d.Ub(),d.Ub())}function Ht(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",60),d.Qc(3," Error "),d.Ub(),d.Ub())}function Mt(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1),d.ic(2,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Sc(" ",d.jc(2,1,"validations.required")," "))}function Dt(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"min"),d.Ub())}function jt(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"max"),d.Ub())}const Rt=function(e){return["text-white",e]},zt=function(){return["text-white","bg-cyan-800"]},Gt=function(){return["text-white","bg-blue-gray-500"]};let Bt=(()=>{class e{constructor(e,t,a,s,i,r){this.ngZone=e,this.settings=t,this.service=a,this.snackBar=s,this.toastr=i,this.fb=r,this.dns=[],this.dnt=[],this.dce=[],this.dcs=[],this.dpl=[],this.da=[],this.stats={title_tsc:"Tanque Desarenador 1",title_tstc:"T. sostenimiento Tanque de Carga",amount_ssc:50.2,amount_sstc:180.2,date:new Date,progress:{value_ssc:50,value_sstc:180},configuration:{time_tsc:2,time_tstc:4,limite_cssc:80,limite_csstc:100,alarm_cssc:2,alarm_csstc:2},color_sc:"bg-blue-50",color_stc:"bg-lightblue-500"},this.chart1=null,this.chart2=null,this.options1={chart:{height:280,type:"radialBar"},series:[0],colors:["#20E647"],plotOptions:{radialBar:{hollow:{margin:0,size:"70%",background:"#293450"},track:{dropShadow:{enabled:!0,top:2,left:0,blur:4,opacity:.15}},dataLabels:{name:{offsetY:-10,color:"#fff",fontSize:"13px"},value:{color:"#fff",fontSize:"30px",show:!0}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",gradientToColors:["#87D4F9"],stops:[0,100]}},stroke:{lineCap:"round"},labels:["Compuerta de Entrada"]},this.options2={chart:{height:280,type:"radialBar"},series:[0],colors:["#20E647"],plotOptions:{radialBar:{hollow:{margin:0,size:"70%",background:"#293450"},track:{dropShadow:{enabled:!0,top:2,left:0,blur:4,opacity:.15}},dataLabels:{name:{offsetY:-10,color:"#fff",fontSize:"13px"},value:{color:"#fff",fontSize:"30px",show:!0}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",gradientToColors:["#87D4F9"],stops:[0,100]}},stroke:{lineCap:"round"},labels:["Compuerta de Salida"]},this.states=[{code:"0",name:"0"},{code:"25",name:"25"},{code:"50",name:"50"},{code:"75",name:"75"},{code:"100",name:"100"}],this.active=!0,this.value=0,this.filteredStates=this.states,this.messages=[{img:"assets/images/avatars/tanque_limpio.svg",subject:"Proceso de limpieza en el tanque desarenador 1",content:"Estado actual del Proceso de Limpieza.",state:"Terminado",state_cl:"bg-green-500"},{img:"assets/images/avatars/lavado_tanque.svg",subject:"Relavar el tanque desarenador 1",content:"La verificaci\xf3n se realiza manual.",state:"Proceso",state_cl:"bg-cyan-500"}],this.time=new S.a(e=>{setInterval(()=>e.next((new Date).toString()),1e3)}),this.form1=new o.j({}),this.model1={},this.options10={},this.fields1=[{type:"input",key:"nameRed",templateOptions:{label:"Nombre de la Red"}},{type:"input",key:"passwordRed",templateOptions:{type:"password",label:"Password de la red",placeholder:"Minimo 3 caracteres",required:!0,minLength:3}}],this.form2=new o.j({}),this.model2={},this.options20={formState:{awesomeIsForced:!1}},this.fields2=[{fieldGroupClassName:"row",fieldGroup:[{key:"aast1",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Alarma",description:"Activaci\xf3n de Alarma de Sedimentos de Tanque 1",required:!1}},{key:"amtd1",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Modulo",description:"Activacion de modulo Tanque Desarenador 1.",required:!1,onClick:e=>console.log("You clicked me!")}},{key:"lmst1",type:"input",className:"col-sm-6",templateOptions:{label:"",description:"Limite Maximo de Sedimentos del Tanque 1. [cm]",required:!1}},{key:"tsst1",type:"input",className:"col-sm-6",templateOptions:{label:"",description:"Tiempo de Sostenimiento de Sedimentacion del Tanque 1. [s]",required:!1}}]},{type:"checkbox",key:"confirm",templateOptions:{label:"Confirmar"}}],this.motor=0,this.proceso_ce=0,this.proceso_cs=0,this.state_proces=0,this.alamr_sedimentacion=0,this.data$=this.service.messages$.pipe(Object(O.a)(e=>{"HISTORICO"===e.message&&this.getSeriesHistorico(e.dataHistoric),null!=e.espConf&&"esp5#1005"===e.espConf.ID&&this.loadConfigESP(e.espConf),null!=e.dataSend&&"esp5#1005"===e.dataSend.ID&&(this.messages[0].state=0===e.dataSend.Proceso?"Detenido":"En Proceso",this.messages[0].state_cl=1===e.dataSend.Proceso?"bg-cyan-500":"bg-green-500",this.messages[1].state=8===e.dataSend.Paso_Limp_Tan1?"Detenido":"En Proceso",this.messages[1].state_cl=8===e.dataSend.Paso_Limp_Tan1?"bg-red-500":"bg-green-500",this.proceso_ce=e.dataSend.Est_Compuerta_Entrada,this.proceso_cs=e.dataSend.Est_Compuerta_Salida,this.value=e.dataSend.Paso_Limp_Tan1,this.state_proces=e.dataSend.Proceso,this.filter(e.dataSend.Pos_Compu_Entrada_Tan1,e.dataSend.Pos_Compu_Salida_Tan1),this.SedimentNivel(e.dataSend.Niv_Sediment_Tan1,e.dataSend.Niv_Tan1),this.alamr_sedimentacion=e.dataSend.Alarm_Alta_Sedimentacion)}),Object(U.a)(e=>{throw e}),Object(V.a)({error:e=>console.log("Error:",e),complete:()=>console.log("Connection Closed")})),this.chartOptions_ns={series:[{name:"basic",data:[0],color:"#FB8611"}],chart:{type:"bar",foreColor:"#eeeeee",height:350},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},xaxis:{categories:["Nivel de Sedimentos (cm)"]},yaxis:{min:0,max:100}},this.chartOptions_nt={series:[{name:"basic",data:[0]}],chart:{type:"bar",foreColor:"#eeeeee",height:350},colors:["#009DC7"],plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},xaxis:{categories:["Nivel de Tanque (cm)"]},yaxis:{min:0,max:100}},this.chartOptionsHN={series:[{name:"Nivel de Sedimentos",data:[]},{name:"Nivel de Tanque",data:[]}],chart:{height:350,type:"area",foreColor:"#eeeeee",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#D77E00","#009DC7"],dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Historial de Niveles Sedimentos y Tanque",align:"left"},grid:{borderColor:"#e7e7e7",row:{colors:["#transparent","transparent"],opacity:.1}},markers:{size:1},xaxis:{categories:[],type:"datetime",title:{text:"Tiempo"}},yaxis:{title:{text:"Nivel"},min:0,max:100},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}},this.chartOptionsHACS={series:[{name:"Nivel de Sedimentos",data:[]},{name:"Nivel de Tanque",data:[]}],chart:{height:350,type:"area",foreColor:"#eeeeee",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#D77E00","#009DC7"],dataLabels:{enabled:!1},stroke:{curve:"smooth"},title:{text:"Posiciones de Compuertas",align:"left"},grid:{borderColor:"#e7e7e7",row:{colors:["#transparent","transparent"],opacity:.1}},markers:{size:1},xaxis:{categories:[],type:"datetime",title:{text:"Tiempo"}},yaxis:{title:{text:"Nivel"},min:0,max:100},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}},this.chartOptionsHPL={series:[{name:"Paso - Limpieza",data:[]}],chart:{type:"line",foreColor:"#eeeeee",height:350},stroke:{curve:"stepline"},colors:["#F4F327"],dataLabels:{enabled:!1},title:{text:"Pasos",align:"left"},xaxis:{type:"datetime",title:{text:"Tiempo"}},yaxis:{title:{text:"Paso"},min:0,max:10},markers:{hover:{sizeOffset:4}}},this.group=r.group({dateTime:[new Date,o.x.required]})}ngOnInit(){this.data$.subscribe(),this.service.connect()}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>this.initChart()),this.service.sendMessage({action:"config",message:"APP",esp:"esp5#1005"})}ngOnDestroy(){this.chart1&&this.chart1.destroy()}getSeriesHistorico(e){console.log("DATA HISTORICO: ",e),e.forEach(e=>{this.dns.push([e.sortKey-18e6,e.Niv_Sediment_Tan1]),this.dnt.push([e.sortKey-18e6,e.Niv_Tan1]),this.dce.push([e.sortKey-18e6,e.Pos_Compu_Entrada_Tan1]),this.dcs.push([e.sortKey-18e6,e.Pos_Compu_Salida_Tan1]),this.dpl.push([e.sortKey-18e6,e.Paso_Limp_Tan1]),this.da.push([e.sortKey-18e6,e.Proceso])}),this.chartOptionsHN.series=[{name:"Nivel de Sedimentos",data:this.dns},{name:"Nivel de Tanque",data:this.dnt}],this.chartOptionsHACS.series=[{name:"P Compuerta IN",data:this.dce},{name:"P Compuerta OUT",data:this.dcs}],this.chartOptionsHPL.series=[{name:"Pasos de Limpieza",data:this.dpl}]}initChart(){this.chart1=new ApexCharts(document.querySelector("#chart1"),this.options1),this.chart1.render(),this.chart2=new ApexCharts(document.querySelector("#chart2"),this.options2),this.chart2.render()}loadConfigESP(e){this.model2={aast1:1===Number(e.Acti_Alarm_Sedim_Tan1),amtd1:1===Number(e.Acti_Mod_Tan_Desarenador1),lmst1:e.Limt_Max_Sedim_Tan1,tsst1:e.Tiemp_Sost_Sedim_Tan1}}start(){console.warn("start open"),this.service.sendMessage({action:"control",message:"ESPM5",espCLIENT:"esp5",espCode:"1005",control:"action",Ini_Limp_Tan1:1,Parar_Limp_Tan1:0,Confirm_Limp_Tan1:0})}stop(){console.warn("stop open"),this.service.sendMessage({action:"control",message:"ESPM5",espCLIENT:"esp5",espCode:"1005",control:"action",Ini_Limp_Tan1:0,Parar_Limp_Tan1:1,Confirm_Limp_Tan1:0})}relavar(){console.warn("start relavar"),this.service.sendMessage({action:"control",message:"ESPM5",espCLIENT:"esp5",espCode:"1005",control:"action",Ini_Limp_Tan1:1,Parar_Limp_Tan1:0,Confirm_Limp_Tan1:1})}continuar(){console.warn("continuar limpieza"),this.service.sendMessage({action:"control",message:"ESPM5",espCLIENT:"esp5",espCode:"1005",control:"action",Ini_Limp_Tan1:1,Parar_Limp_Tan1:0,Confirm_Limp_Tan1:2})}activeInput(){console.log(this.active),this.active=!this.active}filter(e,t){this.chart1.updateSeries([e]),this.chart2.updateSeries([t])}SedimentNivel(e,t){this.chartOptions_ns.series=[{data:[e]}],this.chartOptions_nt.series=[{data:[t]}]}getHistorico(){let e=new Date(this.group.value.dateTime).getTime();console.log("fecha del Historico: ",e);let t={action:"config",message:"HISTORICO",esp:"esp5#1005",date:e};this.showToast("Consulta Historico de ESP Modulo 5"),this.service.sendMessage(t)}submit1(){this.form1.valid&&this.showToast(this.model1)}submit2(){if(console.log(this.model2),this.form2.valid){this.activeInput();let e={action:"control",message:"ESPM5",espCLIENT:"esp5",espCode:"1005",control:"config",Acti_Alarm_Sedim_Tan1:this.model2.aast1?1:0,Acti_Mod_Tan_Desarenador1:this.model2.amtd1?1:0,Limt_Max_Sedim_Tan1:this.model2.lmst1,Tiemp_Sost_Sedim_Tan1:this.model2.tsst1};this.service.sendMessage(e),this.showToast(e)}}showToast(e){this.toastr.success(JSON.stringify(e))}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.B),d.Pb(y.d),d.Pb(z),d.Pb(Se.a),d.Pb(G.b),d.Pb(o.f))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-visor-control-esp-five"]],viewQuery:function(e,t){if(1&e&&(d.Uc(St,!0),d.Uc(St,!0),d.Uc(Ot,!0),d.Uc(Ut,!0),d.Uc(Vt,!0)),2&e){let e;d.zc(e=d.ec())&&(t.chart_ns=e.first),d.zc(e=d.ec())&&(t.chart_nt=e.first),d.zc(e=d.ec())&&(t.chart_hn=e.first),d.zc(e=d.ec())&&(t.chart_hacs=e.first),d.zc(e=d.ec())&&(t.chart_hpl=e.first)}},decls:122,vars:97,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex.gt-sm","100","fxFlex","100",1,"matero-col"],["fxFlex.gt-sm","100","fxFlex","100"],["fxFlex.gt-sm","60","fxFlex","100"],["matListAvatar","","alt","",3,"src"],["matLine",""],[1,"text-muted"],["selected","false"],["class","bg-red-500","selected","false",4,"ngIf"],["fxLayout","row",4,"ngIf"],["fxFlex.gt-sm","40","fxFlex","100",1,"matero-col","text-right","mtop"],["min","0","max","10","tickInterval","1","thumbLabel","","aria-label","Rating",3,"ngModel","ngModelChange"],["autocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],[1,"f-s-12","f-w-100"],["fxFlex","100",1,"sec2"],["fxFlex","100","fxFlex.xs","100",1,"sec1"],["id","chart-ns","fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","text-white"],[3,"series","chart","dataLabels","plotOptions","xaxis"],["id","chart-nt","fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","text-white"],["fxFlex","30",1,"sec2"],["fxLayout","row","fxLayoutAlign","space-around center"],["id","chart1","fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],["fxFlex","55","fxFlex.xs","15",1,"sec3"],["id","chart2","fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],["fxFlex.gt-sm","70","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],[3,"formGroup","ngSubmit"],[3,"model","fields","options","form"],["mat-raised-button","",1,"bg-light-green-900",3,"disabled"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","light-green-50"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex","100","fxFlex.gt-sm","50",1,"matero-col"],[3,"formGroup"],["matSuffix","",3,"for"],["startView","month","type","datetime",3,"openOnFocus","timeInterval"],["datetimePicker",""],["autocomplete","false","formControlName","dateTime","matInput","","required","",3,"matDatetimepicker","max","min"],["mat-mini-fab","","aria-label","Mini floating action button to increase the button counter by 1",3,"click"],["id","chart"],[3,"series","chart","xaxis","stroke","colors","dataLabels","legend","markers","grid","yaxis","title"],["id","chart-cas"],["fxFlex","100","fxFlex.gt-sm","100",1,"matero-col"],["id","chart-hpl"],[3,"series","chart","markers","colors","xaxis","stroke","yaxis","dataLabels","title"],["selected","false",1,"bg-red-500"],["fxLayout","row"],["mat-icon-button","","aria-label","Delete",1,"mat-focus-indicator","mat-icon-button","mat-button-base",3,"click"],[1,"mat-button-wrapper"],["role","img","color","accent","aria-hidden","true","data-mat-icon-type","font",1,"mat-icon","notranslate","mat-accent","material-icons"],["matripple","",1,"mat-ripple","mat-button-ripple","mat-button-ripple-round"],[1,"mat-button-focus-overlay"],[3,"vertical"],["mat-icon-button","","aria-label","done",1,"mat-focus-indicator","mat-icon-button","mat-button-base",3,"click"],[3,"value"],["mat-raised-button","",1,"bg-green-500","text-white",3,"disabled","click"],["mat-raised-button","","color","warn",3,"disabled","click"],["selected","",1,"f-s-12","f-w-20","bg-blue-500","text-uppercase"],["selected","",1,"f-s-12","f-w-20","bg-green-500","text-uppercase"],["selected","",1,"f-s-12","f-w-20","bg-red-500","text-uppercase"]],template:function(e,t){if(1&e&&(d.Qb(0,"page-header"),d.Vb(1,"div",0),d.Vb(2,"div",1),d.Vb(3,"mat-card"),d.Vb(4,"mat-card-content",2),d.Vb(5,"mat-list",3),d.Vb(6,"mat-list-item"),d.Qb(7,"img",4),d.Vb(8,"h3",5),d.Qc(9),d.Ub(),d.Vb(10,"p",5),d.Vb(11,"small",6),d.Qc(12),d.Ub(),d.Ub(),d.Vb(13,"mat-chip",7),d.Qc(14),d.Ub(),d.Oc(15,kt,2,0,"mat-chip",8),d.Qb(16,"mat-divider"),d.Ub(),d.Vb(17,"mat-list-item"),d.Qb(18,"img",4),d.Vb(19,"h3",5),d.Qc(20),d.Ub(),d.Vb(21,"p",5),d.Vb(22,"small",6),d.Qc(23),d.Ub(),d.Ub(),d.Oc(24,wt,20,1,"mat-list",9),d.Ub(),d.Ub(),d.Vb(25,"div",10),d.Vb(26,"mat-label"),d.Qc(27,"Limpieza: "),d.Ub(),d.Vb(28,"mat-slider",11),d.dc("ngModelChange",function(e){return t.value=e}),d.Ub(),d.Vb(29,"mat-autocomplete",null,12),d.Oc(31,qt,3,2,"mat-option",13),d.Ub(),d.Oc(32,At,6,2,"section",14),d.Oc(33,Tt,4,0,"section",14),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(34,"div",1),d.Vb(35,"mat-card",15),d.Vb(36,"mat-card-title",16),d.Qc(37),d.Ub(),d.Vb(38,"mat-card-content"),d.Vb(39,"div",17),d.Vb(40,"div",1),d.Vb(41,"div",18),d.Vb(42,"div",19),d.Qb(43,"apx-chart",20),d.Ub(),d.Vb(44,"div",21),d.Qb(45,"apx-chart",20),d.Ub(),d.Ub(),d.Ub(),d.Vb(46,"div",22),d.Vb(47,"div",23),d.Qb(48,"div",24),d.Ub(),d.Vb(49,"div",23),d.Oc(50,Qt,4,0,"mat-chip-list",14),d.Oc(51,Pt,4,0,"mat-chip-list",14),d.Oc(52,Lt,4,0,"mat-chip-list",14),d.Oc(53,Et,4,0,"mat-chip-list",14),d.Ub(),d.Ub(),d.Vb(54,"div",25),d.Vb(55,"div",23),d.Qb(56,"div",26),d.Ub(),d.Vb(57,"div",23),d.Oc(58,It,4,0,"mat-chip-list",14),d.Oc(59,Ft,4,0,"mat-chip-list",14),d.Oc(60,Nt,4,0,"mat-chip-list",14),d.Oc(61,Ht,4,0,"mat-chip-list",14),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(62,"small",6),d.Qc(63),d.ic(64,"async"),d.Ub(),d.Qb(65,"br"),d.Qb(66,"br"),d.Qb(67,"br"),d.Vb(68,"div",0),d.Vb(69,"div",27),d.Vb(70,"mat-card",15),d.Vb(71,"mat-card-title"),d.Qc(72,"Configuracion de Modulo"),d.Ub(),d.Vb(73,"form",28),d.dc("ngSubmit",function(){return t.submit2()}),d.Qb(74,"formly-form",29),d.Vb(75,"button",30),d.Qc(76,"Guardar"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(77,"div",31),d.Vb(78,"mat-card",15),d.Vb(79,"mat-card-title"),d.Qc(80,"Configuracion de Parametros"),d.Ub(),d.Vb(81,"form",28),d.dc("ngSubmit",function(){return t.submit1()}),d.Qb(82,"formly-form",29),d.Vb(83,"button",32),d.Qc(84,"Submit"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(85,"div",0),d.Vb(86,"div",33),d.Vb(87,"mat-card"),d.Vb(88,"mat-card-subtitle"),d.Qc(89,"Historial de Estado de Elementos"),d.Ub(),d.Vb(90,"h1"),d.Qc(91,"Historial de Niveles del Tanque"),d.Ub(),d.Vb(92,"form",34),d.Vb(93,"div",0),d.Vb(94,"mat-form-field"),d.Vb(95,"mat-placeholder"),d.Qc(96,"Fecha y Hora"),d.Ub(),d.Qb(97,"mat-datetimepicker-toggle",35),d.Qb(98,"mat-datetimepicker",36,37),d.Qb(100,"input",38),d.Oc(101,Mt,3,3,"mat-error",14),d.Oc(102,Dt,2,0,"mat-error",14),d.Oc(103,jt,2,0,"mat-error",14),d.Ub(),d.Vb(104,"button",39),d.dc("click",function(){return t.getHistorico()}),d.Vb(105,"mat-icon"),d.Qc(106,"search"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(107,"div",40),d.Qb(108,"apx-chart",41),d.Ub(),d.Ub(),d.Ub(),d.Vb(109,"div",33),d.Vb(110,"mat-card"),d.Vb(111,"mat-card-subtitle"),d.Qc(112,"Historico de aperturas de Compuertas"),d.Ub(),d.Vb(113,"div",42),d.Qb(114,"apx-chart",41),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(115,"div",0),d.Vb(116,"div",43),d.Vb(117,"mat-card"),d.Vb(118,"mat-card-subtitle"),d.Qc(119,"Pasos de Limpieza"),d.Ub(),d.Vb(120,"div",44),d.Qb(121,"apx-chart",45),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e){const e=d.Ac(99);d.Cb(7),d.qc("src",t.messages[0].img,d.Fc),d.Cb(2),d.Sc(" ",t.messages[0].subject," "),d.Cb(3),d.Sc(" ",t.messages[0].content," "),d.Cb(1),d.Eb(t.messages[0].state_cl),d.Cb(1),d.Sc("",t.messages[0].state," "),d.Cb(1),d.qc("ngIf",1===t.alamr_sedimentacion),d.Cb(3),d.qc("src",t.messages[1].img,d.Fc),d.Cb(2),d.Sc(" ",t.messages[1].subject," "),d.Cb(3),d.Sc(" ",t.messages[1].content," "),d.Cb(1),d.qc("ngIf",8===t.value),d.Cb(4),d.qc("ngModel",t.value),d.Cb(3),d.qc("ngForOf",t.filteredStates),d.Cb(1),d.qc("ngIf",3!=t.state_proces),d.Cb(1),d.qc("ngIf",3===t.state_proces),d.Cb(2),d.qc("ngClass",d.tc(93,Rt,t.stats.color_stc)),d.Cb(2),d.Rc(t.stats.title_tsc),d.Cb(6),d.qc("series",t.chartOptions_ns.series)("chart",t.chartOptions_ns.chart)("dataLabels",t.chartOptions_ns.dataLabels)("plotOptions",t.chartOptions_ns.plotOptions)("xaxis",t.chartOptions_ns.xaxis),d.Cb(2),d.qc("series",t.chartOptions_nt.series)("chart",t.chartOptions_nt.chart)("dataLabels",t.chartOptions_nt.dataLabels)("plotOptions",t.chartOptions_nt.plotOptions)("xaxis",t.chartOptions_nt.xaxis),d.Cb(5),d.qc("ngIf",0===t.proceso_ce),d.Cb(1),d.qc("ngIf",1===t.proceso_ce),d.Cb(1),d.qc("ngIf",2===t.proceso_ce),d.Cb(1),d.qc("ngIf",3===t.proceso_ce),d.Cb(5),d.qc("ngIf",0===t.proceso_cs),d.Cb(1),d.qc("ngIf",1===t.proceso_cs),d.Cb(1),d.qc("ngIf",2===t.proceso_cs),d.Cb(1),d.qc("ngIf",3===t.proceso_cs),d.Cb(2),d.Sc("Fecha: ",d.jc(64,91,t.time),"."),d.Cb(7),d.qc("ngClass",d.sc(95,zt)),d.Cb(3),d.qc("formGroup",t.form2),d.Cb(1),d.qc("model",t.model2)("fields",t.fields2)("options",t.options20)("form",t.form2),d.Cb(1),d.qc("disabled",!t.form2.valid),d.Cb(3),d.qc("ngClass",d.sc(96,Gt)),d.Cb(3),d.qc("formGroup",t.form1),d.Cb(1),d.qc("model",t.model1)("fields",t.fields1)("options",t.options10)("form",t.form1),d.Cb(1),d.qc("disabled",!t.form1.valid),d.Cb(9),d.qc("formGroup",t.group),d.Cb(5),d.qc("for",e),d.Cb(1),d.qc("openOnFocus",!0)("timeInterval",5),d.Cb(2),d.qc("matDatetimepicker",e)("max",t.tomorrow)("min",t.today),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.required),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMin),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMax),d.Cb(5),d.qc("series",t.chartOptionsHN.series)("chart",t.chartOptionsHN.chart)("xaxis",t.chartOptionsHN.xaxis)("stroke",t.chartOptionsHN.stroke)("colors",t.chartOptionsHN.colors)("dataLabels",t.chartOptionsHN.dataLabels)("legend",t.chartOptionsHN.legend)("markers",t.chartOptionsHN.markers)("grid",t.chartOptionsHN.grid)("yaxis",t.chartOptionsHN.yaxis)("title",t.chartOptionsHN.title),d.Cb(6),d.qc("series",t.chartOptionsHACS.series)("chart",t.chartOptionsHACS.chart)("xaxis",t.chartOptionsHACS.xaxis)("stroke",t.chartOptionsHACS.stroke)("colors",t.chartOptionsHACS.colors)("dataLabels",t.chartOptionsHACS.dataLabels)("legend",t.chartOptionsHACS.legend)("markers",t.chartOptionsHACS.markers)("grid",t.chartOptionsHACS.grid)("yaxis",t.chartOptionsHACS.yaxis)("title",t.chartOptionsHACS.title),d.Cb(7),d.qc("series",t.chartOptionsHPL.series)("chart",t.chartOptionsHPL.chart)("markers",t.chartOptionsHPL.markers)("colors",t.chartOptionsHPL.colors)("xaxis",t.chartOptionsHPL.xaxis)("stroke",t.chartOptionsHPL.stroke)("yaxis",t.chartOptionsHPL.yaxis)("dataLabels",t.chartOptionsHPL.dataLabels)("title",t.chartOptionsHPL.title)}},directives:[K.a,J.c,J.a,Y.a,Y.b,De.a,De.c,De.b,B.k,se.a,i.n,Ve.a,X.g,Oe.a,o.q,o.t,yt.a,i.m,i.l,W.a,Y.e,c.a,J.b,o.y,o.r,o.k,r.e,te.b,Y.d,X.c,X.h,ee.f,X.j,ee.c,o.d,h.b,ee.d,o.i,o.w,ae.a,B.o,se.b,X.b],pipes:[i.b,$.d],styles:["mat-slider[_ngcontent-%COMP%]{pointer-events:none}.mtop[_ngcontent-%COMP%]{padding-top:2rem}"]}),e})();const $t=["chart-ns"],Kt=["chart-hn"],Jt=["chart-hacs"],Yt=["chart-hpl"];function Wt(e,t){1&e&&(d.Vb(0,"mat-chip",46),d.Qc(1," Alto nivel de Sedimentos "),d.Ub())}function Zt(e,t){if(1&e){const e=d.Wb();d.Vb(0,"mat-list",47),d.Vb(1,"mat-list-item"),d.Vb(2,"button",48),d.dc("click",function(){return d.Dc(e),d.hc().relavar()}),d.Vb(3,"span",49),d.Vb(4,"mat-icon",50),d.Qc(5," autorenew "),d.Ub(),d.Qc(6," Relavar "),d.Ub(),d.Qb(7,"span",51),d.Qb(8,"span",52),d.Ub(),d.Ub(),d.Qc(9," \xa0\xa0 "),d.Qb(10,"mat-divider",53),d.Qc(11," \xa0\xa0 "),d.Vb(12,"mat-list-item"),d.Vb(13,"button",54),d.dc("click",function(){return d.Dc(e),d.hc().continuar()}),d.Vb(14,"span",49),d.Vb(15,"mat-icon",50),d.Qc(16," done "),d.Ub(),d.Qc(17," Continuar "),d.Ub(),d.Qb(18,"span",51),d.Qb(19,"span",52),d.Ub(),d.Ub(),d.Ub()}2&e&&(d.Cb(10),d.qc("vertical",!0))}function Xt(e,t){if(1&e&&(d.Vb(0,"mat-option",55),d.Vb(1,"span"),d.Qc(2),d.Ub(),d.Ub()),2&e){const e=t.$implicit;d.qc("value",e.name),d.Cb(2),d.Rc(e.name)}}function ea(e,t){if(1&e){const e=d.Wb();d.Vb(0,"section"),d.Vb(1,"button",56),d.dc("click",function(){return d.Dc(e),d.hc().start()}),d.Qc(2,"Iniciar"),d.Ub(),d.Qc(3," \xa0 \xa0 "),d.Vb(4,"button",57),d.dc("click",function(){return d.Dc(e),d.hc().stop()}),d.Qc(5,"Parar"),d.Ub(),d.Ub()}if(2&e){const e=d.hc();d.Cb(1),d.qc("disabled",!(0===e.state_proces||2===e.state_proces)),d.Cb(3),d.qc("disabled",!(1===e.state_proces))}}function ta(e,t){if(1&e&&(d.Vb(0,"section"),d.Vb(1,"mat-list-item"),d.Vb(2,"mat-chip",7),d.Qc(3,"ERROR EN ELPROCESO"),d.Ub(),d.Ub(),d.Ub()),2&e){const e=d.hc();d.Cb(2),d.Eb(e.message.state_cl)}}function aa(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",58),d.Qc(3," Detenida "),d.Ub(),d.Ub())}function sa(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",59),d.Qc(3," Abriendo "),d.Ub(),d.Ub())}function ia(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",59),d.Qc(3," Cerrando "),d.Ub(),d.Ub())}function oa(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",60),d.Qc(3," Error "),d.Ub(),d.Ub())}function ra(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",58),d.Qc(3," Detenida "),d.Ub(),d.Ub())}function ca(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",59),d.Qc(3," Abriendo "),d.Ub(),d.Ub())}function na(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",59),d.Qc(3," Cerrando "),d.Ub(),d.Ub())}function la(e,t){1&e&&(d.Vb(0,"mat-chip-list"),d.Qc(1," Estado: "),d.Vb(2,"mat-chip",60),d.Qc(3," Error "),d.Ub(),d.Ub())}function da(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1),d.ic(2,"translate"),d.Ub()),2&e&&(d.Cb(1),d.Sc(" ",d.jc(2,1,"validations.required")," "))}function ma(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"min"),d.Ub())}function ba(e,t){1&e&&(d.Vb(0,"mat-error"),d.Qc(1,"max"),d.Ub())}const pa=function(e){return["text-white",e]},ha=function(){return["text-white","bg-cyan-800"]},ua=function(){return["text-white","bg-blue-gray-500"]};let ga=(()=>{class e{constructor(e,t,a,s,i,r){this.ngZone=e,this.settings=t,this.service=a,this.snackBar=s,this.toastr=i,this.fb=r,this.dns=[],this.dnt=[],this.dce=[],this.dcs=[],this.dpl=[],this.da=[],this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0","#00D9E9","#FF66C3"],this.stats={title_tsc:"Tanque Desarenador 2",title_tstc:"T. sostenimiento Tanque de Carga",amount_ssc:50.2,amount_sstc:180.2,date:new Date,progress:{value_ssc:50,value_sstc:180},configuration:{time_tsc:2,time_tstc:4,limite_cssc:80,limite_csstc:100,alarm_cssc:2,alarm_csstc:2},color_sc:"bg-blue-50",color_stc:"bg-blue-gray-500"},this.chart1=null,this.chart2=null,this.options1={chart:{height:280,type:"radialBar"},series:[30],colors:["#20E647"],plotOptions:{radialBar:{hollow:{margin:0,size:"70%",background:"#293450"},track:{dropShadow:{enabled:!0,top:2,left:0,blur:4,opacity:.15}},dataLabels:{name:{offsetY:-10,color:"#fff",fontSize:"13px"},value:{color:"#fff",fontSize:"30px",show:!0}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",gradientToColors:["#87D4F9"],stops:[0,100]}},stroke:{lineCap:"round"},labels:["Compuerta Entrada"]},this.options2={chart:{height:280,type:"radialBar"},series:[20],colors:["#20E647"],plotOptions:{radialBar:{hollow:{margin:0,size:"70%",background:"#293450"},track:{dropShadow:{enabled:!0,top:2,left:0,blur:4,opacity:.15}},dataLabels:{name:{offsetY:-10,color:"#fff",fontSize:"13px"},value:{color:"#fff",fontSize:"30px",show:!0}}}},fill:{type:"gradient",gradient:{shade:"dark",type:"vertical",gradientToColors:["#87D4F9"],stops:[0,100]}},stroke:{lineCap:"round"},labels:["Compuerta Salida"]},this.states=[{code:"0",name:"0"},{code:"25",name:"25"},{code:"50",name:"50"},{code:"75",name:"75"},{code:"100",name:"100"}],this.active=!0,this.filteredStates=this.states,this.messages=[{img:"assets/images/avatars/lavado_tanque.svg",subject:"Relavar el tanque desarenador 2",content:"La verificaci\xf3n se realiza manual.",state:"Relavar",state_cl:"bg-cyan-500"},{img:"assets/images/avatars/tanque_limpio.svg",subject:"Tanque Limpio",content:"Estado actual del Tanque.",state:"Terminado",state_cl:"bg-green-500"}],this.time=new S.a(e=>{setInterval(()=>e.next((new Date).toString()),1e3)}),this.form1=new o.j({}),this.model1={},this.options10={},this.fields1=[{type:"input",key:"nameRed",templateOptions:{label:"Nombre de la Red"}},{type:"input",key:"passwordRed",templateOptions:{type:"password",label:"Password de la red",placeholder:"Minimo 3 caracteres",required:!0,minLength:3}}],this.form2=new o.j({}),this.model2={},this.options20={formState:{awesomeIsForced:!1}},this.fields2=[{fieldGroupClassName:"row",fieldGroup:[{key:"aast2",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Alarma",description:"Activaci\xf3n de Alarma de Sedimentos de Tanque 2",required:!1}},{key:"amtd2",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Modulo",description:"Activacion de modulo Tanque Desarenador 2.",required:!1,onClick:e=>console.log("You clicked me!")}},{key:"lmst2",type:"input",className:"col-sm-6",templateOptions:{label:"-",description:"Limite Maximo de Sedimentos del Tanque 2. [cm]",required:!1}},{key:"tsst2",type:"input",className:"col-sm-6",templateOptions:{label:"-",description:"Tiempo de Sostenimiento de Sedimentacion del Tanque 2. [s]",required:!1}}]},{type:"checkbox",key:"confirm",templateOptions:{label:"Confirmar"}}],this.value=0,this.motor=0,this.proceso_ce=0,this.proceso_cs=0,this.state_proces=0,this.alamr_sedimentacion=0,this.data$=this.service.messages$.pipe(Object(O.a)(e=>{"HISTORICO"===e.message&&this.getSeriesHistorico(e.dataHistoric),null!=e.espConf&&"esp6#1006"===e.espConf.ID&&this.loadConfigESP(e.espConf),null!=e.dataSend&&"esp6#1006"===e.dataSend.ID&&(this.messages[0].state=0===e.dataSend.Proceso?"Detenido":"En Proceso",this.messages[0].state_cl=1===e.dataSend.Proceso?"bg-red-500":"bg-green-500",this.messages[1].state=8===e.dataSend.Paso_Limp_Tan2?"Detenido":"En Proceso",this.messages[1].state_cl=8===e.dataSend.Paso_Limp_Tan2?"bg-red-500":"bg-green-500",this.proceso_ce=e.dataSend.Est_Compuerta_Entrada,this.proceso_cs=e.dataSend.Est_Compuerta_Salida,this.value=e.dataSend.Paso_Limp_Tan2,this.state_proces=e.dataSend.Proceso,this.filter(e.dataSend.Pos_Compu_Entrada_Tan2,e.dataSend.Pos_Compu_Salida_Tan2),this.SedimentNivel(e.dataSend.Niv_Sediment_Tan2,e.dataSend.Niv_Tan2),this.alamr_sedimentacion=e.dataSend.Alarm_Alta_Sedimentacion)}),Object(U.a)(e=>{throw e}),Object(V.a)({error:e=>console.log("Error:",e),complete:()=>console.log("Connection Closed")})),this.chartOptions_ns={series:[{name:"basic",data:[0],color:"#FB8611"}],chart:{type:"bar",foreColor:"#eeeeee",height:350},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},xaxis:{categories:["Nivel de Sedimentos"]}},this.chartOptions_nt={series:[{name:"basic",data:[0]}],chart:{type:"bar",foreColor:"#eeeeee",height:350},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},xaxis:{categories:["Nivel de Tanque"]}},this.chartOptionsHN={series:[{name:"Nivel de Sedimentos",data:[]},{name:"Nivel de Tanque",data:[]}],chart:{height:350,type:"line",foreColor:"#eeeeee",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#D77E00","#009DC7"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},title:{text:"Historial de Niveles Sedimentos y Tanque",align:"left"},grid:{borderColor:"#e7e7e7",row:{colors:["#transparent","transparent"],opacity:.1}},markers:{size:1},xaxis:{categories:[],type:"datetime",title:{text:"Tiempo"}},yaxis:{title:{text:"Nivel"},min:0,max:100},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}},this.chartOptionsHACS={series:[{name:"Nivel de Sedimentos",data:[]},{name:"Nivel de Tanque",data:[]}],chart:{height:350,type:"line",foreColor:"#eeeeee",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2},toolbar:{show:!1}},colors:["#D77E00","#009DC7"],dataLabels:{enabled:!0},stroke:{curve:"smooth"},title:{text:"Posiciones de Compuertas",align:"left"},grid:{borderColor:"#e7e7e7",row:{colors:["#transparent","transparent"],opacity:.1}},markers:{size:1},xaxis:{categories:[],type:"datetime",title:{text:"Tiempo"}},yaxis:{title:{text:"Nivel"},min:0,max:100},legend:{position:"top",horizontalAlign:"right",floating:!0,offsetY:-25,offsetX:-5}},this.chartOptionsHPL={series:[{name:"Paso - Limpieza",data:[]}],chart:{type:"line",foreColor:"#eeeeee",height:350},stroke:{curve:"stepline"},colors:["#F4F327"],dataLabels:{enabled:!0},title:{text:"Pasos",align:"left"},xaxis:{type:"datetime",title:{text:"Tiempo"}},yaxis:{title:{text:"Paso"},min:0,max:10},markers:{hover:{sizeOffset:4}}},this.group=r.group({dateTime:[new Date,o.x.required]})}ngOnInit(){this.data$.subscribe(),this.service.connect()}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>this.initChart()),this.service.sendMessage({action:"config",message:"APP",esp:"esp6#1006"})}ngOnDestroy(){this.chart1&&this.chart1.destroy()}getSeriesHistorico(e){console.log("DATA HISTORICO: ",e),e.forEach(e=>{this.dns.push([e.sortKey-18e6,e.Niv_Sediment_Tan2]),this.dnt.push([e.sortKey-18e6,e.Niv_Tan2]),this.dce.push([e.sortKey-18e6,e.Pos_Compu_Entrada_Tan2]),this.dcs.push([e.sortKey-18e6,e.Pos_Compu_Salida_Tan2]),this.dpl.push([e.sortKey-18e6,e.Paso_Limp_Tan2]),this.da.push([e.sortKey-18e6,e.Proceso])}),this.chartOptionsHN.series=[{name:"Nivel de Sedimentos",data:this.dns},{name:"Nivel de Tanque",data:this.dnt}],this.chartOptionsHACS.series=[{name:"P Compuerta IN",data:this.dce},{name:"P Compuerta OUT",data:this.dcs}],this.chartOptionsHPL.series=[{name:"Pasos de Limpieza",data:this.dpl}]}initChart(){this.chart1=new ApexCharts(document.querySelector("#chart1"),this.options1),this.chart1.render(),this.chart2=new ApexCharts(document.querySelector("#chart2"),this.options2),this.chart2.render()}start(){console.warn("start open"),this.service.sendMessage({action:"control",message:"ESPM6",espCLIENT:"esp6",espCode:"1006",control:"action",Ini_Limp_Tan2:1,Parar_Limp_Tan2:0,Confirm_Limp_Tan2:0})}stop(){console.warn("stop open"),this.service.sendMessage({action:"control",message:"ESPM6",espCLIENT:"esp6",espCode:"1006",control:"action",Ini_Limp_Tan2:0,Parar_Limp_Tan2:1,Confirm_Limp_Tan2:0})}relavar(){console.warn("start relavar"),this.service.sendMessage({action:"control",message:"ESPM6",espCLIENT:"esp6",espCode:"1006",control:"action",Ini_Limp_Tan2:1,Parar_Limp_Tan2:0,Confirm_Limp_Tan2:1})}continuar(){console.warn("continuar limpieza"),this.service.sendMessage({action:"control",message:"ESPM6",espCLIENT:"esp6",espCode:"1006",control:"action",Ini_Limp_Tan2:1,Parar_Limp_Tan2:0,Confirm_Limp_Tan2:2})}activeInput(){console.log(this.active),this.active=!this.active}loadConfigESP(e){this.model2={aast2:1===Number(e.Acti_Alarm_Sedim_Tan2),amtd2:1===Number(e.Acti_Mod_Tan_Desarenador2),lmst2:e.Limt_Max_Sedim_Tan2,tsst2:e.Tiemp_Sost_Sedim_Tan2}}filter(e,t){this.chart1.updateSeries([e]),this.chart2.updateSeries([t])}SedimentNivel(e,t){this.chartOptions_ns.series=[{data:[e]}],this.chartOptions_nt.series=[{data:[t]}]}getHistorico(){let e=new Date(this.group.value.dateTime).getTime();console.log("fecha del Historico: ",e);let t={action:"config",message:"HISTORICO",esp:"esp6#1006",date:e};this.showToast("Consulta Historico de ESP Modulo 6"),this.service.sendMessage(t)}submit1(){this.form1.valid&&this.showToast(this.model1)}submit2(){if(console.log(this.model2),this.form2.valid){this.activeInput();let e={action:"control",message:"ESPM6",espCLIENT:"esp6",espCode:"1006",control:"config",Acti_Alarm_Sedim_Tan2:this.model2.aast2?1:0,Acti_Mod_Tan_Desarenador2:this.model2.amtd2?1:0,Limt_Max_Sedim_Tan2:this.model2.lmst2,Tiemp_Sost_Sedim_Tan2:this.model2.tsst2};this.service.sendMessage(e),this.showToast(e)}}showToast(e){this.toastr.success(JSON.stringify(e))}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.B),d.Pb(y.d),d.Pb(z),d.Pb(Se.a),d.Pb(G.b),d.Pb(o.f))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-visor-control-esp-six"]],viewQuery:function(e,t){if(1&e&&(d.Uc($t,!0),d.Uc($t,!0),d.Uc(Kt,!0),d.Uc(Jt,!0),d.Uc(Yt,!0)),2&e){let e;d.zc(e=d.ec())&&(t.chart_ns=e.first),d.zc(e=d.ec())&&(t.chart_nt=e.first),d.zc(e=d.ec())&&(t.chart_hn=e.first),d.zc(e=d.ec())&&(t.chart_hacs=e.first),d.zc(e=d.ec())&&(t.chart_hpl=e.first)}},decls:122,vars:97,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex.gt-sm","100","fxFlex","100",1,"matero-col"],["fxFlex.gt-sm","100","fxFlex","100"],["fxFlex.gt-sm","60","fxFlex","100"],["matListAvatar","","alt","",3,"src"],["matLine",""],[1,"text-muted"],["selected","false"],["class","bg-red-500","selected","false",4,"ngIf"],["fxLayout","row",4,"ngIf"],["fxFlex.gt-sm","40","fxFlex","100",1,"matero-col","text-right","mtop"],["min","0","max","10","tickInterval","1","thumbLabel","","aria-label","Rating",3,"ngModel","ngModelChange"],["autocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"ngClass"],[1,"f-s-12","f-w-100"],["fxFlex","100",1,"sec2"],["fxFlex","100","fxFlex.xs","100",1,"sec1"],["id","chart-ns","fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","text-white"],[3,"series","chart","dataLabels","plotOptions","xaxis"],["id","chart-nt","fxFlex.gt-sm","50","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","text-white"],["fxFlex","30",1,"sec2"],["fxLayout","row","fxLayoutAlign","space-around center"],["id","chart1","fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],["fxFlex","55","fxFlex.xs","15",1,"sec3"],["id","chart2","fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],["fxFlex.gt-sm","70","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],[3,"formGroup","ngSubmit"],[3,"model","fields","options","form"],["mat-raised-button","",1,"bg-light-green-900",3,"disabled"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","light-green-50"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex","100","fxFlex.gt-sm","50",1,"matero-col"],[3,"formGroup"],["matSuffix","",3,"for"],["startView","month","type","datetime",3,"openOnFocus","timeInterval"],["datetimePicker",""],["autocomplete","false","formControlName","dateTime","matInput","","required","",3,"matDatetimepicker","max","min"],["mat-mini-fab","","aria-label","Mini floating action button to increase the button counter by 1",3,"click"],["id","chart"],[3,"series","chart","xaxis","stroke","colors","dataLabels","legend","markers","grid","yaxis","title"],["id","chart-cas"],["fxFlex","100","fxFlex.gt-sm","100",1,"matero-col"],["id","chart-hpl"],[3,"series","chart","markers","colors","xaxis","stroke","yaxis","dataLabels","title"],["selected","false",1,"bg-red-500"],["fxLayout","row"],["mat-icon-button","","aria-label","Delete",1,"mat-focus-indicator","mat-icon-button","mat-button-base",3,"click"],[1,"mat-button-wrapper"],["role","img","color","accent","aria-hidden","true","data-mat-icon-type","font",1,"mat-icon","notranslate","mat-accent","material-icons"],["matripple","",1,"mat-ripple","mat-button-ripple","mat-button-ripple-round"],[1,"mat-button-focus-overlay"],[3,"vertical"],["mat-icon-button","","aria-label","done",1,"mat-focus-indicator","mat-icon-button","mat-button-base",3,"click"],[3,"value"],["mat-raised-button","",1,"bg-green-500","text-white",3,"disabled","click"],["mat-raised-button","","color","warn",3,"disabled","click"],["selected","",1,"f-s-12","f-w-20","bg-blue-500","text-uppercase"],["selected","",1,"f-s-12","f-w-20","bg-green-500","text-uppercase"],["selected","",1,"f-s-12","f-w-20","bg-red-500","text-uppercase"]],template:function(e,t){if(1&e&&(d.Qb(0,"page-header"),d.Vb(1,"div",0),d.Vb(2,"div",1),d.Vb(3,"mat-card"),d.Vb(4,"mat-card-content",2),d.Vb(5,"mat-list",3),d.Vb(6,"mat-list-item"),d.Qb(7,"img",4),d.Vb(8,"h3",5),d.Qc(9),d.Ub(),d.Vb(10,"p",5),d.Vb(11,"small",6),d.Qc(12),d.Ub(),d.Ub(),d.Vb(13,"mat-chip",7),d.Qc(14),d.Ub(),d.Oc(15,Wt,2,0,"mat-chip",8),d.Qb(16,"mat-divider"),d.Ub(),d.Vb(17,"mat-list-item"),d.Qb(18,"img",4),d.Vb(19,"h3",5),d.Qc(20),d.Ub(),d.Vb(21,"p",5),d.Vb(22,"small",6),d.Qc(23),d.Ub(),d.Ub(),d.Oc(24,Zt,20,1,"mat-list",9),d.Ub(),d.Ub(),d.Vb(25,"div",10),d.Vb(26,"mat-label"),d.Qc(27,"Limpieza: "),d.Ub(),d.Vb(28,"mat-slider",11),d.dc("ngModelChange",function(e){return t.value=e}),d.Ub(),d.Vb(29,"mat-autocomplete",null,12),d.Oc(31,Xt,3,2,"mat-option",13),d.Ub(),d.Oc(32,ea,6,2,"section",14),d.Oc(33,ta,4,2,"section",14),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(34,"div",1),d.Vb(35,"mat-card",15),d.Vb(36,"mat-card-title",16),d.Qc(37),d.Ub(),d.Vb(38,"mat-card-content"),d.Vb(39,"div",17),d.Vb(40,"div",1),d.Vb(41,"div",18),d.Vb(42,"div",19),d.Qb(43,"apx-chart",20),d.Ub(),d.Vb(44,"div",21),d.Qb(45,"apx-chart",20),d.Ub(),d.Ub(),d.Ub(),d.Vb(46,"div",22),d.Vb(47,"div",23),d.Qb(48,"div",24),d.Ub(),d.Vb(49,"div",23),d.Oc(50,aa,4,0,"mat-chip-list",14),d.Oc(51,sa,4,0,"mat-chip-list",14),d.Oc(52,ia,4,0,"mat-chip-list",14),d.Oc(53,oa,4,0,"mat-chip-list",14),d.Ub(),d.Ub(),d.Vb(54,"div",25),d.Vb(55,"div",23),d.Qb(56,"div",26),d.Ub(),d.Vb(57,"div",23),d.Oc(58,ra,4,0,"mat-chip-list",14),d.Oc(59,ca,4,0,"mat-chip-list",14),d.Oc(60,na,4,0,"mat-chip-list",14),d.Oc(61,la,4,0,"mat-chip-list",14),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(62,"small",6),d.Qc(63),d.ic(64,"async"),d.Ub(),d.Qb(65,"br"),d.Qb(66,"br"),d.Qb(67,"br"),d.Vb(68,"div",0),d.Vb(69,"div",27),d.Vb(70,"mat-card",15),d.Vb(71,"mat-card-title"),d.Qc(72,"Configuracion de Modulo"),d.Ub(),d.Vb(73,"form",28),d.dc("ngSubmit",function(){return t.submit2()}),d.Qb(74,"formly-form",29),d.Vb(75,"button",30),d.Qc(76,"Guardar"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(77,"div",31),d.Vb(78,"mat-card",15),d.Vb(79,"mat-card-title"),d.Qc(80,"Configuracion de Parametros"),d.Ub(),d.Vb(81,"form",28),d.dc("ngSubmit",function(){return t.submit1()}),d.Qb(82,"formly-form",29),d.Vb(83,"button",32),d.Qc(84,"Submit"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(85,"div",0),d.Vb(86,"div",33),d.Vb(87,"mat-card"),d.Vb(88,"mat-card-subtitle"),d.Qc(89,"Historial de Estado de Elementos"),d.Ub(),d.Vb(90,"h1"),d.Qc(91,"Historial de Niveles del Tanque"),d.Ub(),d.Vb(92,"form",34),d.Vb(93,"div",0),d.Vb(94,"mat-form-field"),d.Vb(95,"mat-placeholder"),d.Qc(96,"Fecha y Hora"),d.Ub(),d.Qb(97,"mat-datetimepicker-toggle",35),d.Qb(98,"mat-datetimepicker",36,37),d.Qb(100,"input",38),d.Oc(101,da,3,3,"mat-error",14),d.Oc(102,ma,2,0,"mat-error",14),d.Oc(103,ba,2,0,"mat-error",14),d.Ub(),d.Vb(104,"button",39),d.dc("click",function(){return t.getHistorico()}),d.Vb(105,"mat-icon"),d.Qc(106,"search"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(107,"div",40),d.Qb(108,"apx-chart",41),d.Ub(),d.Ub(),d.Ub(),d.Vb(109,"div",33),d.Vb(110,"mat-card"),d.Vb(111,"mat-card-subtitle"),d.Qc(112,"Historico de aperturas de Compuertas"),d.Ub(),d.Vb(113,"div",42),d.Qb(114,"apx-chart",41),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(115,"div",0),d.Vb(116,"div",43),d.Vb(117,"mat-card"),d.Vb(118,"mat-card-subtitle"),d.Qc(119,"Pasos de Limpieza"),d.Ub(),d.Vb(120,"div",44),d.Qb(121,"apx-chart",45),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e){const e=d.Ac(99);d.Cb(7),d.qc("src",t.messages[0].img,d.Fc),d.Cb(2),d.Sc(" ",t.messages[0].subject," "),d.Cb(3),d.Sc(" ",t.messages[0].content," "),d.Cb(1),d.Eb(t.messages[0].state_cl),d.Cb(1),d.Sc("",t.messages[0].state," "),d.Cb(1),d.qc("ngIf",1===t.alamr_sedimentacion),d.Cb(3),d.qc("src",t.messages[1].img,d.Fc),d.Cb(2),d.Sc(" ",t.messages[1].subject," "),d.Cb(3),d.Sc(" ",t.messages[1].content," "),d.Cb(1),d.qc("ngIf",8===t.value),d.Cb(4),d.qc("ngModel",t.value),d.Cb(3),d.qc("ngForOf",t.filteredStates),d.Cb(1),d.qc("ngIf",3!=t.state_proces),d.Cb(1),d.qc("ngIf",3===t.state_proces),d.Cb(2),d.qc("ngClass",d.tc(93,pa,t.stats.color_stc)),d.Cb(2),d.Rc(t.stats.title_tsc),d.Cb(6),d.qc("series",t.chartOptions_ns.series)("chart",t.chartOptions_ns.chart)("dataLabels",t.chartOptions_ns.dataLabels)("plotOptions",t.chartOptions_ns.plotOptions)("xaxis",t.chartOptions_ns.xaxis),d.Cb(2),d.qc("series",t.chartOptions_nt.series)("chart",t.chartOptions_nt.chart)("dataLabels",t.chartOptions_nt.dataLabels)("plotOptions",t.chartOptions_nt.plotOptions)("xaxis",t.chartOptions_nt.xaxis),d.Cb(5),d.qc("ngIf",0===t.proceso_ce),d.Cb(1),d.qc("ngIf",1===t.proceso_ce),d.Cb(1),d.qc("ngIf",2===t.proceso_ce),d.Cb(1),d.qc("ngIf",3===t.proceso_ce),d.Cb(5),d.qc("ngIf",0===t.proceso_cs),d.Cb(1),d.qc("ngIf",1===t.proceso_cs),d.Cb(1),d.qc("ngIf",2===t.proceso_cs),d.Cb(1),d.qc("ngIf",3===t.proceso_cs),d.Cb(2),d.Sc("Fecha: ",d.jc(64,91,t.time),"."),d.Cb(7),d.qc("ngClass",d.sc(95,ha)),d.Cb(3),d.qc("formGroup",t.form2),d.Cb(1),d.qc("model",t.model2)("fields",t.fields2)("options",t.options20)("form",t.form2),d.Cb(1),d.qc("disabled",!t.form2.valid),d.Cb(3),d.qc("ngClass",d.sc(96,ua)),d.Cb(3),d.qc("formGroup",t.form1),d.Cb(1),d.qc("model",t.model1)("fields",t.fields1)("options",t.options10)("form",t.form1),d.Cb(1),d.qc("disabled",!t.form1.valid),d.Cb(9),d.qc("formGroup",t.group),d.Cb(5),d.qc("for",e),d.Cb(1),d.qc("openOnFocus",!0)("timeInterval",5),d.Cb(2),d.qc("matDatetimepicker",e)("max",t.tomorrow)("min",t.today),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.required),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMin),d.Cb(1),d.qc("ngIf",null==t.group.get("dateTime").errors?null:t.group.get("dateTime").errors.matDatepickerMax),d.Cb(5),d.qc("series",t.chartOptionsHN.series)("chart",t.chartOptionsHN.chart)("xaxis",t.chartOptionsHN.xaxis)("stroke",t.chartOptionsHN.stroke)("colors",t.chartOptionsHN.colors)("dataLabels",t.chartOptionsHN.dataLabels)("legend",t.chartOptionsHN.legend)("markers",t.chartOptionsHN.markers)("grid",t.chartOptionsHN.grid)("yaxis",t.chartOptionsHN.yaxis)("title",t.chartOptionsHN.title),d.Cb(6),d.qc("series",t.chartOptionsHACS.series)("chart",t.chartOptionsHACS.chart)("xaxis",t.chartOptionsHACS.xaxis)("stroke",t.chartOptionsHACS.stroke)("colors",t.chartOptionsHACS.colors)("dataLabels",t.chartOptionsHACS.dataLabels)("legend",t.chartOptionsHACS.legend)("markers",t.chartOptionsHACS.markers)("grid",t.chartOptionsHACS.grid)("yaxis",t.chartOptionsHACS.yaxis)("title",t.chartOptionsHACS.title),d.Cb(7),d.qc("series",t.chartOptionsHPL.series)("chart",t.chartOptionsHPL.chart)("markers",t.chartOptionsHPL.markers)("colors",t.chartOptionsHPL.colors)("xaxis",t.chartOptionsHPL.xaxis)("stroke",t.chartOptionsHPL.stroke)("yaxis",t.chartOptionsHPL.yaxis)("dataLabels",t.chartOptionsHPL.dataLabels)("title",t.chartOptionsHPL.title)}},directives:[K.a,J.c,J.a,Y.a,Y.b,De.a,De.c,De.b,B.k,se.a,i.n,Ve.a,X.g,Oe.a,o.q,o.t,yt.a,i.m,i.l,W.a,Y.e,c.a,J.b,o.y,o.r,o.k,r.e,te.b,Y.d,X.c,X.h,ee.f,X.j,ee.c,o.d,h.b,ee.d,o.i,o.w,ae.a,B.o,se.b,X.b],pipes:[i.b,$.d],styles:[""]}),e})();var fa=a("zkoq");const Ca=["chart"];function xa(e,t){1&e&&(d.Vb(0,"mat-chip",29),d.Qc(1," Alta Sedimentaci\xf3n "),d.Ub())}function _a(e,t){if(1&e&&(d.Vb(0,"mat-list-item"),d.Qb(1,"img",25),d.Vb(2,"h3",26),d.Qc(3),d.Ub(),d.Vb(4,"p",26),d.Vb(5,"small",18),d.Qc(6),d.Ub(),d.Ub(),d.Vb(7,"mat-chip-list"),d.Vb(8,"mat-chip",27),d.Qc(9),d.Ub(),d.Vb(10,"mat-chip",27),d.Qc(11),d.Ub(),d.Oc(12,xa,2,0,"mat-chip",28),d.Ub(),d.Qb(13,"mat-divider"),d.Ub()),2&e){const e=t.$implicit,a=d.hc();d.Cb(1),d.qc("src",e.img,d.Fc),d.Cb(2),d.Sc(" ",e.subject," "),d.Cb(3),d.Sc(" ",e.content," "),d.Cb(2),d.Eb(e.state_d),d.Cb(1),d.Rc(e.diferencia),d.Cb(1),d.Eb(e.state_cl),d.Cb(1),d.Rc(e.state),d.Cb(1),d.qc("ngIf",a.error_state)}}function va(e,t){if(1&e&&(d.Vb(0,"mat-option",30),d.Vb(1,"span"),d.Qc(2),d.Ub(),d.Ub()),2&e){const e=t.$implicit;d.qc("value",e.name),d.Cb(2),d.Rc(e.name)}}const ya=function(e){return["text-white",e]},Sa=function(){return["text-white","bg-blue-gray-500"]},Oa=function(){return["text-white","bg-cyan-800"]},Ua=[{path:"esp-one",component:ve},{path:"esp-two",component:Me},{path:"esp-three",component:it},{path:"esp-four",component:vt},{path:"esp-five",component:Bt},{path:"esp-six",component:ga},{path:"esp-seven",component:(()=>{class e{constructor(e,t,a,s,i){this.ngZone=e,this.settings=t,this.service=a,this.snackBar=s,this.toastr=i,this.stats={title_tsc:"Rejilla Tanque de Carga",title_tstc:"T. sostenimiento Tanque de Carga",amount_ssc:50.2,amount_sstc:180.2,date:new Date,progress:{value_ssc:50,value_sstc:180},configuration:{time_tsc:2,time_tstc:4,limite_cssc:80,limite_csstc:100,alarm_cssc:2,alarm_csstc:2},color_sc:"bg-blue-50",color_stc:"bg-blue-500"},this.states=[{code:"0",name:"0"},{code:"25",name:"25"},{code:"50",name:"50"},{code:"75",name:"75"},{code:"100",name:"100"}],this.filteredStates=this.states,this.active=!0,this.value=0,this.error_state=!1,this.proceso=0,this.messages=[{img:"assets/images/avatars/rejilla_limpiar.svg",subject:"Limpiando rejilla",content:"Limpiando rejilla.",state:"Detenido",state_cl:"bg-blue-500",state_d:"bg-blue-500",diferencia:0}],this.pasos=["Sin Actividad","Abriendo Rastrillo","Bajando Rastrillo","Cerrando Rastrillo","Subiendo Rastrillo","Activando Banda"],this.paso_state="",this.time=new S.a(e=>{setInterval(()=>e.next((new Date).toString()),1e3)}),this.form1=new o.j({}),this.model1={},this.options10={},this.fields1=[{type:"input",key:"nameRed",templateOptions:{label:"Nombre de la Red"}},{type:"input",key:"passwordRed",templateOptions:{type:"password",label:"Password de la red",placeholder:"Minimo 3 caracteres",required:!0,minLength:3}},{fieldGroupClassName:"row",fieldGroup:[{className:"col-sm-6",type:"input",key:"ipRed",templateOptions:{label:"IP de la Red",required:!1}},{className:"col-sm-6",type:"input",key:"portRed",templateOptions:{label:"Puerto de Red",required:!1},expressionProperties:{"templateOptions.disabled":"!model.ipRed"}}]},{type:"input",key:"mascaraRed",templateOptions:{label:"Mascara de Red"}},{type:"input",key:"puertaRed",templateOptions:{label:"Puerta de Enlace"}},{type:"input",key:"dnsUnoRed",templateOptions:{label:"DNS 1"}},{type:"input",key:"dnsDosRed",templateOptions:{label:"DNS 2"}}],this.form2=new o.j({}),this.model2={},this.options20={formState:{awesomeIsForced:!1}},this.fields2=[{fieldGroupClassName:"row",fieldGroup:[{key:"aal",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Alarma",description:"Activaci\xf3n de Alarma de Limpieza",required:!1}},{key:"amlrtc",type:"toggle",className:"col-sm-6",templateOptions:{label:"Activaci\xf3n de Modulo",description:"Activacion de modulo Limpieza Rejilla Tanque de Carga.",required:!1,onClick:e=>console.log("You clicked me!")}},{key:"ldn",type:"input",className:"col-sm-6",templateOptions:{label:"-",description:"Limite de diferencia de Niveles. [MSNM]",required:!1}},{key:"tsdn",type:"input",className:"col-sm-6",templateOptions:{label:"-",description:"Tiempo de Sostenimiento de Diferencia de Niveles. [s]",required:!1}}]},{type:"checkbox",key:"confirm",templateOptions:{label:"Confirmar"}}],this.data$=this.service.messages$.pipe(Object(O.a)(e=>{null!=e.espConf&&"esp7#1007"===e.espConf.ID&&(console.log("compuerta: ",e.espConf," - ",e.dataSave),this.loadConfigESP(e.espConf)),null!=e.dataSend&&"esp7#1007"===e.dataSend.ID&&(console.log("Data: ",e.dataSend),this.messages[0].state_cl=1!=e.dataSend.Alarm_Alta_Sedimentacion?"bg-red-500":"bg-green-500",this.messages[0].diferencia=e.dataSend.Diferencia_Nivel,this.value=e.dataSend.Pasos,this.filter(e.dataSend.Niv_Tan_Carga,e.dataSend.Niv_Tub_Carga),this.error_state=1===e.dataSend.Alarm_Alta_Sedimentacion,this.proceso=e.dataSend.Mon_Limp_Rejilla_Tan_Carga,0===this.proceso&&(this.messages[0].state="Detenido"),1===this.proceso&&(this.messages[0].state="Proceso"),2===this.proceso&&(this.messages[0].state="Pausa"),3===this.proceso&&(this.messages[0].state="Error"),this.paso_state=this.pasos[e.dataSend.Pasos])}),Object(U.a)(e=>{throw e}),Object(V.a)({error:e=>console.log("Error:",e),complete:()=>console.log("Connection Closed")})),this.chartOptions={series:[{name:"basic",data:[250,150]}],chart:{type:"bar",height:350},plotOptions:{bar:{horizontal:!1}},dataLabels:{enabled:!1},xaxis:{categories:["Tanque de Carga","Tuberia de Carga"]}}}ngOnInit(){this.data$.subscribe(),this.service.connect()}ngAfterViewInit(){this.ngZone.runOutsideAngular(()=>this.initChart()),this.service.sendMessage({action:"config",message:"APP",esp:"esp7#1007"})}ngOnDestroy(){}initChart(){}loadConfigESP(e){this.model2={aal:1===Number(e.Acti_Alarm_Limp),amlrtc:1===Number(e.Acti_Mod_Limp_Rejilla_Tanq_Carga),ldn:e.Limt_Difer_Niveles,tsdn:e.Tiemp_Sost_Difer_Niveles}}start(){console.warn("start open"),this.service.sendMessage({action:"control",message:"ESPM7",espCLIENT:"esp7",espCode:"1007",control:"action",Ini_Limp_Rej_Tan_Carga:1,Parar_Limp_Rej_Tan_Carga:0})}stop(){this.service.sendMessage({action:"control",message:"ESPM7",espCLIENT:"esp7",espCode:"1007",control:"action",Ini_Limp_Rej_Tan_Carga:0,Parar_Limp_Rej_Tan_Carga:1})}activeInput(){console.log(this.active),this.active=!this.active}filter(e,t){this.chartOptions.series=[{data:[e,t]}]}submit1(){this.form1.valid&&this.showToast(this.model1)}submit2(){if(console.log(this.model2),this.form2.valid){this.activeInput();let e={action:"control",message:"ESPM7",espCLIENT:"esp7",espCode:"1007",control:"config",Acti_Alarm_Limp:this.model2.aal?1:0,Acti_Mod_Limp_Rejilla_Tanq_Carga:this.model2.amlrtc?1:0,Limt_Difer_Niveles:this.model2.ldn,Tiemp_Sost_Difer_Niveles:this.model2.tsdn};this.service.sendMessage(e),this.showToast(e)}}showToast(e){this.toastr.success(JSON.stringify(e))}}return e.\u0275fac=function(t){return new(t||e)(d.Pb(d.B),d.Pb(y.d),d.Pb(z),d.Pb(Se.a),d.Pb(G.b))},e.\u0275cmp=d.Jb({type:e,selectors:[["app-visor-control-esp-seven"]],viewQuery:function(e,t){if(1&e&&d.Uc(Ca,!0),2&e){let e;d.zc(e=d.ec())&&(t.chart=e.first)}},decls:62,vars:37,consts:[["fxLayout","row wrap",1,"matero-row"],["fxFlex.gt-sm","50","fxFlex","100",1,"matero-col"],[4,"ngFor","ngForOf"],["cols","4",1,"mat-grid-list",2,"height","calc(0px)"],["rowspan","1","colspan","3",1,"mat-grid-tile","ng-star-inserted"],[1,"mat-figure"],["min","1","max","6","tickInterval","1","thumbLabel","","aria-label","Rating",3,"ngModel","ngModelChange"],["autocomplete","matAutocomplete"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","",1,"bg-green-500","text-white",3,"disabled","click"],["mat-raised-button","","color","warn",3,"disabled","click"],["rowspan","1","colspan","1",1,"mat-grid-tile","ng-star-inserted"],["color","accent","selected","true","aria-disabled","false","aria-selected","true",1,"mat-chip","mat-focus-indicator","mat-standard-chip","mat-accent","mat-chip-selected"],[1,"mat-chip-ripple"],[3,"ngClass"],[1,"f-s-12","f-w-100"],["id","chart","fxFlex.gt-sm","100","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","text-white"],[3,"series","chart","dataLabels","plotOptions","xaxis"],[1,"text-muted"],["fxFlex.gt-sm","30","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col","light-green-50"],[3,"formGroup","ngSubmit"],[3,"model","fields","options","form"],["mat-raised-button","","color","primary",3,"disabled"],["fxFlex.gt-sm","70","fxFlex.gt-xs","100","fxFlex","100",1,"matero-col"],["mat-raised-button","",1,"bg-light-green-900",3,"disabled"],["matListAvatar","","alt","",3,"src"],["matLine",""],["selected","false"],["class","bg-red-500","selected","false",4,"ngIf"],["selected","false",1,"bg-red-500"],[3,"value"]],template:function(e,t){1&e&&(d.Qb(0,"page-header"),d.Vb(1,"div",0),d.Vb(2,"div",1),d.Vb(3,"mat-card"),d.Vb(4,"mat-card-subtitle"),d.Qc(5,"Estado de Limpieza de Tanque de Carga"),d.Ub(),d.Vb(6,"mat-list"),d.Oc(7,_a,14,10,"mat-list-item",2),d.Ub(),d.Qb(8,"br"),d.Qb(9,"br"),d.Vb(10,"mat-grid-list",3),d.Vb(11,"div"),d.Vb(12,"mat-grid-tile",4),d.Vb(13,"figure",5),d.Vb(14,"mat-label"),d.Qc(15,"Limpieza: "),d.Ub(),d.Vb(16,"mat-slider",6),d.dc("ngModelChange",function(e){return t.value=e}),d.Ub(),d.Vb(17,"mat-autocomplete",null,7),d.Oc(19,va,3,2,"mat-option",8),d.Ub(),d.Vb(20,"button",9),d.dc("click",function(){return t.start()}),d.Qc(21,"Iniciar"),d.Ub(),d.Qc(22," \xa0 \xa0 "),d.Vb(23,"button",10),d.dc("click",function(){return t.stop()}),d.Qc(24,"Parar"),d.Ub(),d.Ub(),d.Ub(),d.Vb(25,"mat-grid-tile",11),d.Vb(26,"figure",5),d.Vb(27,"mat-chip",12),d.Qb(28,"div",13),d.Qc(29),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(30,"div",1),d.Vb(31,"mat-card",14),d.Vb(32,"mat-card-title",15),d.Qc(33),d.Ub(),d.Vb(34,"mat-card-content"),d.Vb(35,"section"),d.Vb(36,"mat-card",14),d.Vb(37,"div",16),d.Qb(38,"apx-chart",17),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(39,"small",18),d.Qc(40),d.ic(41,"async"),d.Ub(),d.Qb(42,"br"),d.Qb(43,"br"),d.Qb(44,"br"),d.Vb(45,"div",0),d.Vb(46,"div",19),d.Vb(47,"mat-card",14),d.Vb(48,"mat-card-title"),d.Qc(49,"Configuracion de Parametros"),d.Ub(),d.Vb(50,"form",20),d.dc("ngSubmit",function(){return t.submit1()}),d.Qb(51,"formly-form",21),d.Vb(52,"button",22),d.Qc(53,"Submit"),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Vb(54,"div",23),d.Vb(55,"mat-card",14),d.Vb(56,"mat-card-title"),d.Qc(57,"Configuracion de Modulo"),d.Ub(),d.Vb(58,"form",20),d.dc("ngSubmit",function(){return t.submit2()}),d.Qb(59,"formly-form",21),d.Vb(60,"button",24),d.Qc(61," Guardar "),d.Ub(),d.Ub(),d.Ub(),d.Ub(),d.Ub()),2&e&&(d.Cb(7),d.qc("ngForOf",t.messages),d.Cb(9),d.qc("ngModel",t.value),d.Cb(3),d.qc("ngForOf",t.filteredStates),d.Cb(1),d.qc("disabled",0!=t.value&&2!=t.proceso),d.Cb(3),d.qc("disabled",0===t.value),d.Cb(6),d.Sc(" ",t.paso_state," "),d.Cb(2),d.qc("ngClass",d.tc(31,ya,t.stats.color_stc)),d.Cb(2),d.Rc(t.stats.title_tsc),d.Cb(3),d.qc("ngClass",d.tc(33,ya,t.stats.color_sc)),d.Cb(2),d.qc("series",t.chartOptions.series)("chart",t.chartOptions.chart)("dataLabels",t.chartOptions.dataLabels)("plotOptions",t.chartOptions.plotOptions)("xaxis",t.chartOptions.xaxis),d.Cb(2),d.Sc("Fecha: ",d.jc(41,29,t.time),"."),d.Cb(7),d.qc("ngClass",d.sc(35,Sa)),d.Cb(3),d.qc("formGroup",t.form1),d.Cb(1),d.qc("model",t.model1)("fields",t.fields1)("options",t.options10)("form",t.form1),d.Cb(1),d.qc("disabled",!t.form1.valid),d.Cb(3),d.qc("ngClass",d.sc(36,Oa)),d.Cb(3),d.qc("formGroup",t.form2),d.Cb(1),d.qc("model",t.model2)("fields",t.fields2)("options",t.options20)("form",t.form2),d.Cb(1),d.qc("disabled",!t.form2.valid))},directives:[K.a,J.c,J.a,Y.a,Y.d,De.a,i.m,fa.a,fa.c,X.g,Oe.a,o.q,o.t,yt.a,te.b,se.a,i.l,W.a,Y.e,Y.b,c.a,o.y,o.r,o.k,r.e,De.c,De.b,B.k,se.b,i.n,Ve.a,B.o],pipes:[i.b],styles:[""]}),e})()}];let Va=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[v.i.forChild(Ua)],v.i]}),e})(),ka=(()=>{class e{}return e.\u0275mod=d.Nb({type:e}),e.\u0275inj=d.Mb({factory:function(t){return new(t||e)},imports:[[i.c,s.a,Va,c.b,o.v,r.f.forRoot({validationMessages:[{name:"required",message:"Este campo es obligatorio"}]}),p,B.m,_]]}),e})()}}]);